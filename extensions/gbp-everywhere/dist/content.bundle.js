(()=>{"use strict";var e={"audit-dashboard":{"dashboard-url":"https://app.gmbeverywhere.com/release7/audit-dashboard.html","maximum-array-size-for-audit-details":5,"maximum-number-of-reviews-needed-scraping":600,"maximum-number-of-posts-needed-scraping":50},"teleport-dashboard":{"dashboard-url":"https://app.gmbeverywhere.com/release7/teleport.html","google-url":"https://www.google.com/"},"error-page":"https://app.gmbeverywhere.com/release7/error.html","category-tool-page":"https://app.gmbeverywhere.com/release7/category-tool/category-finder.html","ai-audit":{"dashboard-url":"https://app.gmbeverywhere.com/release7/ai/landing-page-ai.html"},"local-scan":{"dashboard-url":"https://app.gmbeverywhere.com/release7/local-scan/local-scan.html","send-data-api-url":"https://data.gmbeverywhere.com/xano/save-temporary-data-to-store"},"admin-section":{"base-url":"https://app.gmbeverywhere.com/release7/ai/","ai-description":"gmb-description-generator.html","ai-post":"gmb-post-generator.html","ai-qa":"gmb-q-a-generator.html","ai-tools":"landing-page-ai.html","ai-review-response":"gmb-review-response-generator.html"}},t="review-collection-flow",n="post-collection-flow",r=["th-ignore-ey","wouldn't","my","on","that","with","so","i","not","to","have","them","were","very","for","you","as","an","your","well","will","be","all","he","put","if","could","give","more","than","in","was","while","don't","know","where","is","much","want","enough","what","me","always","being","up","of","time","did","am","okay","owe","his","without","sure","would","from","both","below","had","first","their","been","too,","see,","at","all,","now","and","can't","along","are","also","this","whenever","needed","ask","our","when","we","didn't","us","feel","any","him","by","over","her","out","many","till","off","only","nor","no","can","took","mr.","every","way","during","got","into","since","again","something","taken","after","whatever","whoever","get","she","yet","couldn't","take","using","even","through","should","once","other","some","has","just","one","due","making","needs","might","consider","based","adding","wasn't","because","knows","doing","within","about","though","which","went","came","set","right","upon","whom","such","else","end","goes","above","do","fine","said","those","these","coming","its","keeps","bit","too","makes","says","however,","lets","same","ok","anything","why","soon","times","became","already","show","couldn't","sent","it's","you've","didn't","seemed","that's","between","couldnt","early","i've","she's","you'll","the","it","but","mr","or","there","here","who","see","let","call","like","need","cannot","whole","against","used","step","need","others","thanks","im","before","hes","puts","a","it's","she's","im","hes","actually","basically","um","uh","pretty","maybe","perhaps"],i=[new RegExp("[',.!{}[\\]\\n&0-9/\\-\\$\\(\\)]","g")],a={googleSearchResultPage:"googleSearchResultPage",localFinderSearchResultPane:"localFinderSearchResultPane",localFinderSelectedBusiness:"localFinderSelectedBusiness",mapSearchResultPane:"mapSearchResultPane",mapSelectedBusiness:"mapSelectedBusiness",mapSinglePage:"mapSinglePage",gmbEditProfileAdmin:"gmbEditProfileAdmin",gmbEditServicesAdmin:"gmbEditServicesAdmin"},o="gmb-tooltip",c="l".concat(Math.random().toString(36).substr(2,7),"_gmb-everywhere-category"),d=function(){var e={GMBScriptOnPage:1,GMBScriptWithDirectLocation:2,GMBScriptWithNearLocation:3,NotFound:4,ExactLink:5};return Object.freeze(e),e},s=function(e){var t=document.createElement("span");t.setAttribute("class",o),t.innerHTML="By GMB Everywhere.",e.appendChild(t)},l=function(){var e=document.documentElement.innerHTML,t=e.indexOf("window.APP_INITIALIZATION_STATE="),n=e.indexOf("window.APP_FLAGS",t),r=e.substring(t+32,n),i=JSON.parse(r.slice(0,-1));return i&&i[3]?i[3][6]:""},u=function(e,t){var n=0;return t.forEach((function(t){return t===e&&n++})),n},p=function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))},h=function(e,t,n){var r,i=document.createElement("button");return i.id=t,i.style.cssText="margin-top:20px;\n  margin-bottom:20px;\n  width: 110px;\n  margin-right: 3px;\n  line-height: 1.5;\n  border: 2px solid #cc4d29;\n  background-color:rgb(255, 200, 185);\n  border-radius: .2rem;\n  color: rgb(33, 37, 41);\n  font-size: 14px;\n  padding: 5px 3px;\n  display: inline-block;\n  border-radius: 3px;\n  cursor: pointer;\n  ".concat(null!==(r=null==n?void 0:n.style)&&void 0!==r?r:""),i.innerHTML=e,i},m=function(e,t){chrome.storage.local.get(["ge-local-user-details"],(function(n){var r=new URL(e);0===Object.keys(n).length?r.searchParams.set("user-type","type-a"):(r.searchParams.set("user-type","type-b"),r.searchParams.set("user-information",encodeURIComponent(JSON.stringify(n)))),t?window.location.replace(r.toString()):window.open(r.toString())}))},f=function(e,t){var n="fullPageGreySection";document.querySelectorAll("#"+n).length&&document.getElementById(n).remove();var r=document.createElement("div");r.id=n,r.style.cssText="position:fixed;\n  z-index: 20000; \n  top:0; left:0; bottom:0; right:0;\n  background: rgba(0, 0, 0, 0.7); // Changed to a darker background\n  text-align: center;\n  font-size: 14px;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  backdrop-filter: blur(5px);";var i=document.createElement("div");i.style.cssText="background-color: white;\n    padding: 20px;\n    border-radius: 3px;\n    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n    width: 280px;\n    text-align: center;\n    font-size: 14px;\n    color: #333;\n    line-height: 1.5;";var a=document.body.firstChild,o=document.createElement("p");if(o.style.cssText="margin: 0px",o.innerHTML=e,v(i),t)o.style.marginTop="20px";else{var d=document.createElement("div");d.style.cssText="border: 5px solid #f3f3f3; \n      border-top: 5px solid rgb(255, 122, 82);\n      border-radius: 50%;\n      width: 50px;\n      height: 50px;\n      animation: ".concat(c,"_loader_spin 1s linear infinite;\n      margin: 25px auto 15px auto;"),i.appendChild(d)}i.appendChild(o),r.appendChild(i),a.parentNode.insertBefore(r,a)},v=function(e){var t=document.createElement("img");t.src=chrome.runtime.getURL("imgs/gmb.png"),t.style.cssText="height: 40px; margin: 0 0.6px -12px 6px;",e.appendChild(t)},g=function(e){return'<span><img src="'.concat(chrome.runtime.getURL("imgs/".concat(e.iconName)),'"\n                style="width: ').concat(e.iconSize,";\n                height: ").concat(e.iconSize,";\n                position: relative;\n                top: ").concat((null==e?void 0:e.top)||"1px",";\n                ").concat(null!=e&&e.bottom?"bottom: ".concat(e.bottom):"",'\n                ">\n                </img></span>')},y=function(e){var t=e.match(/ChIJ(.*?)(?=\?)/gi);return t?t[0]:""},w=function(t){var n=t.auditType,r=t.error,i=t.newTab,a=void 0===i||i,o=new URLSearchParams;o.append("ge-mode","business-details"),o.append("audit-type",n),o.append("issue","exception-occured"),o.append("url",window.location.href),o.append("error-name",r.name),o.append("error-message",r.message);var c="".concat(e["error-page"],"?").concat(o.toString());a?window.open(c,"_blank"):window.location.href=c},b=function(t,n,r){t.classList.add("btn-gmb-category-tool");try{var i="21px",o="0 0 3px 3px",c="21px",d="3px",s="14px",l="9px !important",u="Find more",p="waving_hand_icon.svg";if(r===a.mapSearchResultPane&&(i="19px",o="0 0 0 3px",s="12px",c="18px",d="2px",l="7.2px !important"),r===a.gmbEditProfileAdmin&&(u="Find Categories",p="brain_icon.svg",c="15px",l="4px !important",d="1px"),r===a.gmbEditServicesAdmin&&(u="Find Services",p="brain_icon.svg",c="15px",l="4px !important",d="1px"),[a.googleSearchResultPage,a.localFinderSearchResultPane].includes(r)&&(u="Category Finder",o="0 0 3px 0px"),null!=n&&n.length){var h=document.createElement("button");h.style.cssText="\n      height: ".concat(i,"; \n      cursor: pointer; \n      display: inline-block; \n      padding: 0.26em 0.4em 0.25em 0.3em; \n      font-size: ").concat(s,";\n      line-height: 1; \n      text-align: center; \n      white-space: nowrap; \n      vertical-align: middle; \n      border: none;\n      border-radius: .25rem; \n      color: #fff; \n      background-color: rgb(204, 77, 41); \n      margin: ").concat(o,";\n      "),h.onclick=function(t){t.stopPropagation();var i=new URL(e["category-tool-page"]);r===a.gmbEditProfileAdmin&&i.searchParams.set("from","gmb-profile-admin"),r===a.gmbEditServicesAdmin&&(i.searchParams.set("from","gmb-profile-admin"),i.searchParams.set("isShowOnlyService","true"));try{i.searchParams.append("cat",JSON.stringify(n))}catch(e){}window.open(i.toString(),"_blank")},h.innerHTML="".concat(g({iconName:p,iconSize:c,top:"unset",bottom:d}));var m=document.createElement("span");m.innerText=u,m.style.cssText="\n      position: relative;\n      bottom: ".concat(l,";\n      "),h.insertBefore(m,h.nextSibling),t.appendChild(h)}}catch(e){}},x=function(t,n){var r=document.createElement("button");r.style.cssText="\n    height: 21px; \n    cursor: pointer; \n    display: inline-block; \n    padding: 0.26em 0.4em 0.25em 0.3em; \n    font-size: 14px;\n    line-height: 1; \n    text-align: center; \n    white-space: nowrap; \n    vertical-align: middle; \n    border: none;\n    border-radius: .25rem; \n    color: #fff; \n    background-color: rgb(204, 77, 41); \n    margin: 0 0 3px 10px;\n    ",r.onclick=function(t){t.stopPropagation();var r=new URL(e["admin-section"]["ai-qa"],e["admin-section"]["base-url"]);r.searchParams.set("post-ai-mode","generate-user-from-gmb-admin-page"),n&&r.searchParams.set("additional-information","Business Name: ".concat(n)),window.open(r.toString(),"_blank")},r.innerHTML="".concat(g({iconName:"brain_icon.svg",iconSize:"16px",top:"-1px"}));var i=document.createElement("span");i.innerText="Generate Q&A",i.style.cssText="\n    position: relative;\n    bottom: 4px !important;\n    ",r.insertBefore(i,r.nextSibling),t.appendChild(r)},S=function(t,n,r){t.classList.add("btn-gmb-generate-reply"),t.style.cssText="display: inline-block; margin-right: 20px;";var i=document.createElement("button");i.style.cssText="\n    height: 21px; \n    cursor: pointer; \n    display: inline-block; \n    padding: 0.26em 0.4em 0.25em 0.3em; \n    font-size: 14px;\n    line-height: 1; \n    text-align: center; \n    white-space: nowrap; \n    vertical-align: middle; \n    border: none;\n    border-radius: .25rem; \n    color: #fff; \n    background-color: rgb(204, 77, 41); \n    margin-bottom: 3px;\n    ";var a="20px",o="initial",c="initial",d="21px",s="3px",l="-1px",u="4px";switch(r){case 2:a="5px",d="36.66px",s="0",l="2px",u="1px";break;case 3:a="0",o="4px",c="8px",d="36px",s="0",l="2px",u="1px";break;case 4:c="10px"}t.style.marginRight=a,t.style.marginTop=o,t.style.marginLeft=c,i.style.height=d,i.style.marginBottom=s,i.onclick=function(t){t.stopPropagation();var r=new URL(e["admin-section"]["ai-review-response"],e["admin-section"]["base-url"]);r.searchParams.set("post-ai-mode","generate-user-from-gmb-admin-page"),n&&r.searchParams.set("original-review",n),window.open(r.toString(),"_blank")},i.innerHTML="".concat(g({iconName:"brain_icon.svg",iconSize:"16px",top:l}));var p=document.createElement("span");p.innerText="Generate Reply",p.style.cssText="\n    position: relative;\n    bottom: ".concat(u," !important;\n    "),i.insertBefore(p,i.nextSibling),t.appendChild(i)},T=function(){return document.querySelector('[data-sort-id="newestFirst"]')?1:document.querySelector('g-scrolling-carousel[jsshadow] div[data-sort="2"]')?2:1},N=function(e,t){return new Promise((function(n,r){fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((function(e){return n(e)})).catch((function(e){console.error("Error making POST request:",e),r(e)}))}))},q=function(){return crypto.randomUUID()},C=function(e){try{return void 0}catch(e){}};function k(e,t){var n,r,i,a,o=[],c="",d="",s="",l="",u="",p="",h=!1,m="",f="";!0===t?a=e[6]:void 0!==e[0][1][0][14]?a=e[0][1][0][14]:void 0!==e[0][1][1][14]&&(a=e[0][1][1][14]);try{o=a[13],c=a[11],d=a[178]&&a[178][0]&&a[178][0][3]?a[178][0][3]:"",a[4]&&a[4][7]&&a[4][8]?(r=a[4][7],i=a[4][8]):(r=0,i=0),s=a&&a[78]?a[78]:"",l=a&&a[89]?a[89]:"",u=a&&a[2]?a[2]:"",p=a&&a[7]&&a[7][0]?a[7][0]:"",n=a&&a[9]&&a[9][2]&&a[9][3]?{lat:a[9][2],long:a[9][3]}:{lat:"",long:""},h=!a||!a[49];try{f=a&&a[181]&&a[181][5]?a[181][5]:a&&a[227]&&a[227][0]&&a[227][0][5]?a[227][0][5]:""}catch(e){f=""}try{m=a&&a[126]&&a[126][4]?new URL(a[126][4]).searchParams.get("ludocid"):a&&a[126]&&a[126][5]?new URL(a[126][5]).searchParams.get("ludocid"):""}catch(e){m=""}}catch(e){}return{categories:o,phoneNumber:d,businessName:c,numberOfReviews:i,averageReviewRating:r,placeId:s,kgId:l,address:u,website:p,latlong:n,isBusinessVerified:h,cidValue:m,businessProfileId:f}}var E=function(e,t,n,r){if(t===n.GMBScriptOnPage)try{var i=l();if(i&&i.length>5){var a=k(JSON.parse(i.substring(5)),!0),o=a.categories,c=a.businessName,d=a.numberOfReviews,s=a.averageReviewRating,u=M(0,c,o,a.placeId,a.kgId,s,d,a.address,a.website,a.latlong,a.phoneNumber,a.isBusinessVerified,a.cidValue,a.businessProfileId),p=u.uniqueGUIDKey,h=u.uniqueBusinessDetails;A(h,p,r)}}catch(e){return void w({auditType:r,error:e})}else t===n.GMBScriptWithDirectLocation||t===n.GMBScriptWithNearLocation?P(e,(function(e){try{var t=e&&e[3]?e[3][2]:"";if(t&&t.length>5){var n=JSON.parse(t.substring(5));try{var i=k(n,!1),a=i.categories,o=i.businessName,c=i.numberOfReviews,d=i.averageReviewRating,s=M(0,o,a,i.placeId,i.kgId,d,c,i.address,i.website,i.latlong,i.phoneNumber,i.isBusinessVerified,i.cidValue,i.businessProfileId),l=s.uniqueGUIDKey,u=s.uniqueBusinessDetails;A(u,l,r)}catch(e){throw new Error(e)}}}catch(e){return void w({auditType:r,error:e})}})):t===n.ExactLink&&P(e,(function(e){try{var t=e&&e[3]?e[3][6]:"";if(t&&t.length>5){var n=JSON.parse(t.substring(5)),i=n[6][13];if(i&&i.length){var a=k(n,!0),o=a.categories,c=a.businessName,d=a.numberOfReviews,s=a.averageReviewRating,l=M(0,c,o,a.placeId,a.kgId,s,d,a.address,a.website,a.latlong,a.phoneNumber,a.isBusinessVerified,a.cidValue,a.businessProfileId),u=l.uniqueGUIDKey,p=l.uniqueBusinessDetails;A(p,u,r)}}}catch(e){return void w({auditType:r,error:e})}}))},P=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){var e=n.status;if(!(0===e||e>=200&&e<400))return"";try{var r=n.response.indexOf("window.APP_INITIALIZATION_STATE="),i=n.response.indexOf("window.APP_FLAGS",r),a=n.response.substring(r+32,i),o=JSON.parse(a.slice(0,-1));t(o)}catch(e){t("")}}},n.open("GET",e),n.send()};function A(r,i,a){chrome.storage.local.get(["ge-business-details-key"],(function(o){!function(r,i,a,o){void 0===r?r=[i]:r.push(i);var c=e["audit-dashboard"]["maximum-array-size-for-audit-details"];r.length>c&&(r=r.slice(-c)),chrome.storage.local.set({"ge-business-details-key":r},(function(){var r=e["audit-dashboard"]["dashboard-url"],c=e["teleport-dashboard"]["dashboard-url"],d=e["ai-audit"]["dashboard-url"];"basic-audit"===o?m(r+"?ge-mode=business-details&audit-type=basic&unique-code="+a+"&dashboard-data="+encodeURIComponent(JSON.stringify(i.value))):"review-audit"===o?i.value["number-of-review"]>0?window.open("https://search.google.com/local/reviews?hl=en-us&placeid="+i.value["place-id"]+"&ge-mode="+t+"&unique-code="+a+"&number-of-reviews="+i.value["number-of-review"]+"n"):m(r+"?ge-mode=business-details&audit-type=review&unique-code="+a+"&dashboard-data="+encodeURIComponent(JSON.stringify(i.value))):"post-audit"===o?window.open("https://www.google.com/search?kgmid="+i.value["kg-id"]+"&hl=en-us&ge-mode="+n+"&unique-code="+a+"#lpstate=pid:-1"):"teleport"===o?m(c+"?ge-mode=business-details&audit-type=basic&unique-code="+a+"&dashboard-data="+encodeURIComponent(JSON.stringify(i.value))):"ai-audit"===o&&m(d+"?ge-mode=business-details&audit-type=ai&unique-code="+a+"&dashboard-data="+encodeURIComponent(JSON.stringify(i.value)))}))}(o["ge-business-details-key"],r,i,a)}))}function M(e,t,n,r,i,a,o,c,d,s,l,u,p,h){var m="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));return{uniqueGUIDKey:m,uniqueBusinessDetails:{key:m,value:{"business-name":t,categories:n,"place-id":r,"kg-id":i,"average-review-rating":a,"number-of-review":o,address:c,website:d,latlong:s,"phone-number":l,"is-business-verified":u,"cid-value":p,"business-profile-id":h}}}}var O="local-scan",U=function(e){var t=Array.from(e).slice(2).filter((function(e){var t;return null===(t=e.querySelector("div>div>a"))||void 0===t||null===(t=t.href)||void 0===t?void 0:t.includes("/maps/place")}));return t.forEach((function(e){try{e.ads=D(e)?1:0}catch(t){e.ads=0}})),t},D=function(e){var t,n,r=!1,i=null===(t=e.querySelector("div>div:nth-child(2)>div>div"))||void 0===t?void 0:t.children;i&&(r=4===i.length&&"SPAN"===i[0].tagName&&"SPAN"===i[1].tagName&&"BUTTON"===i[2].tagName),(null===(n=e.querySelector("div>div:nth-child(2)>div>div>div:nth-child(2)>div>div:nth-child(3)>div>span"))||void 0===n?void 0:n.innerText)&&!1===r&&(r=!0);var a=L(e),o=R(e);return r||a||o},L=function(e){var t=e.querySelectorAll("a"),n=!1;return t.forEach((function(e){var t=e.getAttribute("href");t&&t.includes("/aclk?")&&(n=!0)})),n},R=function(e){return!!(null==e?void 0:e.querySelector("div>h1>span>span>button[aria-haspopup='true']"))},I=function(e){return new Promise((function(t,n){W(e).then((function(e){try{var r=e&&e[3]?e[3][6]:"";if(!r||r.length<=5)throw new Error("Invalid processed text data");var i=JSON.parse(r.substring(5));if(!i||!i[6])throw new Error("Invalid window array data");var a=i[6];t(a)}catch(e){n(e)}})).catch((function(e){n(e)}))}))},B=function(e){var t;return null!==(t=null==e?void 0:e.matches('[role="feed"]'))&&void 0!==t&&t},z=function(){var e,t=document.querySelector("#pane>div>div>div>div>div>div");if(B(t))return t;var n=document.querySelector("#pane+div>div>div>div>div:nth-child(2)>div>div>div>div>div>div");if(B(n))return n;var r=null===(e=document.querySelector("#pane+div>div>div>div>div:nth-child(2)>div>div>div>div>div>div"))||void 0===e||null===(e=e.parentElement)||void 0===e||null===(e=e.nextElementSibling)||void 0===e?void 0:e.firstChild;return B(r)?r:null},H=function(e){_(),w({auditType:O,error:e,newTab:!0})},_=function(){var e;null===(e=document.getElementById("fullPageGreySection"))||void 0===e||e.remove()},Y=function(){return F((function(){f("GMB Everywhere is processing.<br>Stay on this tab to continue processing."),new Promise((function(t,n){new Promise((function(e){try{if(!z())return void H(new Error("businessSectionElement not found!"));!function t(n,r){setTimeout((function(){try{var i=z(),a=U(i.children).length;a===n&&r++,a>=22||r>3?(function(e){e.scrollTo(0,0)}(i),e()):(function(e){e.scrollTo(0,e.scrollHeight)}(i),t(a,r))}catch(e){return void H(e)}}),1e3)}(0,0)}catch(e){return void H(e)}})).then((function(){new Promise((function(e){var t=[];try{U(z().children).forEach((function(e,n){if(!(n>21||e.ads))try{var r,i={};e.querySelector("div>a")&&(i.placeId=function(){var t,n="",r=null===(t=e.querySelector("div>div>a"))||void 0===t?void 0:t.href;if(r&&(n=y(r)),!n){var i=e.querySelectorAll("div a[href]");if((null==i?void 0:i.length)>0){var a,o=Array.from(i).map((function(e){return e.href})),c=null==o||null===(a=o.filter((function(e){return y(e)})))||void 0===a?void 0:a[0];c&&(n=y(c))}}return n}(),i.businessName=function(){var t,n,r,i=null===(t=e.querySelector("div>div:nth-child(4)>div>div>div>div:nth-child(2)>div>:nth-child(3)"))||void 0===t||null===(t=t.innerText)||void 0===t?void 0:t.trim();return i||(i=null===(n=e.querySelector(".fontHeadlineSmall"))||void 0===n||null===(n=n.innerText)||void 0===n?void 0:n.trim()),i||(i=null===(r=e.querySelector("div>div:nth-child(4)"))||void 0===r||null===(r=r.innerText)||void 0===r?void 0:r.trim()),i}(),i.exactLink=null===(r=e.querySelector("div>div>a"))||void 0===r?void 0:r.href,t.push(i))}catch(e){}}));var n=t.slice(0,20).map((function(e,t){return{businessName:e.businessName,pid:e.placeId,businessUrl:e.placeId?"https://".concat(window.location.hostname,"/maps/place/?q=place_id:").concat(e.placeId):e.exactLink,businessRank:t+1}})).map((function(e,t){return new Promise((function(n){setTimeout((function(){var t=e.businessUrl;I(t).then((function(t){n({rawdata:t,businessName:e.businessName,rank:e.businessRank})})).catch((function(t){n({rawdata:[],businessName:e.businessName,rank:e.businessRank})}))}),250*t)}))}));Promise.all(n).then((function(t){e(t)}))}catch(e){return void H(e)}})).then((function(r){var i,a=q(),o=e["local-scan"]["dashboard-url"],c=e["local-scan"]["send-data-api-url"],d=new URL(o);d.searchParams.set("data-unique-code",a);var s=!1,l=setTimeout((function(){s||(s=!0,_(),window.open(d.toString(),"_blank"))}),3e3),u={url:window.location.href,searchTerm:null===(i=document.querySelector("#searchboxinput"))||void 0===i?void 0:i.value,rawData:r};N(c,{unique_code:a,data:JSON.stringify(u),feature_type:O}).then((function(e){return clearTimeout(l),s||(s=!0,_(),window.open(d.toString(),"_blank")),t()})).catch((function(e){return clearTimeout(l),H(e),n(e)}))}))}))}))}))},F=function(e){var t=document.createElement("button");return t.classList.add("btn-local-scan"),t.style.cssText="\n      border: 3px solid rgb(204, 77, 41); \n      background-color: rgba(255, 200, 185, 0.3); \n      color: rgb(0, 0, 0); \n      font-size: 12px; \n      padding: 5px 5px; \n      border-radius: 5px; \n      cursor: pointer; \n      font-weight: 600;\n      z-index: 10;\n    ",t.textContent="🔍 Local Scan",t.onclick=function(t){t.stopPropagation(),e()},t},G=function(){if(!document.querySelector(".btn-local-scan")){var e,t,n=null===(e=document.querySelector("#pane+div>div>div>div>div:nth-child(2)>div>div>div>div>div>div"))||void 0===e||null===(e=e.parentElement)||void 0===e||null===(e=e.nextElementSibling)||void 0===e?void 0:e.firstChild;if(B(n)){var r,i=null===(r=document.querySelector("div[data-callout-id]"))||void 0===r||null===(r=r.parentElement)||void 0===r||null===(r=r.parentElement)||void 0===r||null===(r=r.parentElement)||void 0===r||null===(r=r.nextElementSibling)||void 0===r?void 0:r.firstChild;return void(i&&((o=Y()).textContent="Local Scan",o.style.padding="5px 2px",i.parentElement.style.marginLeft="0",i.insertBefore(o,i.firstChild)))}var a=null===(t=document.querySelector("div[data-callout-id]"))||void 0===t||null===(t=t.parentElement)||void 0===t||null===(t=t.parentElement)||void 0===t?void 0:t.parentElement.nextElementSibling;if(a){var o=Y();a.querySelector("button[aria-haspopup='menu']")&&(o.textContent="Local Scan",o.style.padding="5px 2px"),a.insertBefore(o,a.firstChild)}}},W=function(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){var e=r.status;if(0===e||e>=200&&e<400)try{var i=r.response.indexOf("window.APP_INITIALIZATION_STATE="),a=r.response.indexOf("window.APP_FLAGS",i),o=r.response.substring(i+32,a),c=JSON.parse(o.slice(0,-1));t(c)}catch(e){n(e)}else n(new Error("Request failed with status: ".concat(e)))}},r.onerror=function(){n(new Error("Network error or request failed"))},r.open("GET",e),r.send()}))},j=function(t){f("GMB Everywhere is processing.<br>Stay on this tab to continue processing.");var n=t.map((function(e,t){return new Promise((function(n){setTimeout((function(){var t=e.businessUrl;I(t).then((function(t){n({rawdata:t,businessName:e.businessName,rank:e.rank})})).catch((function(t){n({rawdata:[],businessName:e.businessName,rank:e.rank})}))}),250*t)}))}));Promise.all(n).then((function(t){var n,r=q(),i=e["local-scan"]["dashboard-url"],a=e["local-scan"]["send-data-api-url"],o=new URL(i);o.searchParams.set("data-unique-code",r);var c=!1,d=setTimeout((function(){c||(c=!0,_(),window.open(o.toString(),"_blank"))}),3e3),s={url:window.location.href,searchTerm:null===(n=document.querySelector("#searchboxinput"))||void 0===n?void 0:n.value,rawData:t};N(a,{unique_code:r,data:JSON.stringify(s),feature_type:O}).then((function(e){clearTimeout(d),c||(c=!0,_(),window.open(o.toString(),"_blank"))})).catch((function(e){clearTimeout(d),H(e)}))}))},J="",Q="GMB Categories not found. Please go to the business page on Google Maps to find the categories.",X=d(),K=function(){return window.location.hostname},V=function(e){try{re();var t=document.createElement("p");t.setAttribute("class",c),t.style.cssText="display: inline-block; font-size: 14px; border-radius: .25rem; color: #212529;",t.appendChild(document.createTextNode(e)),$().appendChild(t)}catch(e){re(),C()}},Z=function(){var e="".concat(K()).concat(window.location.pathname)==="".concat(K(),"/search"),t=document.querySelector("#searchform"),n=document.querySelector("#appbar"),r=document.querySelector("#search"),i=document.querySelector("#appbar [role='menu']"),a=document.querySelector("#appbar [role='menubar']");return e&&t&&n&&r&&(i||a)},$=function(){var e=document.querySelector("[data-attrid='kc:/local:lu attribute list']");return e||((e=document.querySelector(".kp-header .fYOrjf .wDYxhc .zloOqf > span.YhemCb"))||(e=document.querySelector(".kp-header .fYOrjf .wDYxhc .zloOqf"))?e.parentElement:void 0)},ee=function(){var e=document.querySelector("[data-title]");return e?e.getAttribute("data-title"):(e=document.querySelector("[data-attrid='title']"))?e.textContent:(e=document.querySelector(".kp-header .fYOrjf .Hhmu2e .Ftghae .SPZz6b > h2.qrShPb > span"))?e.textContent.trim():void 0},te=function(){return"https://".concat(K()).concat(function(){var e=document.querySelector("[data-place]");if(e)return e.getAttribute("data-place")}())},ne=function(){var e,t,n;e=te(),t=function(e){try{var t=e&&e[3]?e[3][6]:"";if(t&&t.length>5){var n=JSON.parse(t.substring(5))[6][13];n&&n.length?ie(n):V(Q)}else V(Q)}catch(e){V(Q)}},(n=new XMLHttpRequest).onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){var e=n.status;if(!(0===e||e>=200&&e<400))return"";try{var r=n.response.indexOf("window.APP_INITIALIZATION_STATE="),i=n.response.indexOf("window.APP_FLAGS",r),a=n.response.substring(r+32,i),o=JSON.parse(a.slice(0,-1));t(o)}catch(e){t("")}}},n.open("GET",e),n.send()},re=function(){var e=document.querySelector("."+c);e&&e.remove()},ie=function(e){try{re();var t=document.createElement("div");t.className=c,t.style.cssText="position: relative; margin-top: 7px;",s(t);var n=document.createElement("span");n.textContent="GMB Categories: ",n.style.cssText="display: inline-block; font-size: 14px; border-radius: .25rem; color: #212529;",t.appendChild(n),e.forEach((function(e,n){var r=document.createElement("span");r.innerHTML=(0===n?g({iconName:"star_icon.svg",iconSize:"12px"}):"")+e,r.style.cssText="display: inline-block;padding: .25em .4em;font-size: 14px;line-height: 1;text-align: center;white-space: nowrap;vertical-align: baseline;border-radius: .25rem;color: #212529;background-color: #ffc8b9;margin: 0 0 3px 3px;",t.appendChild(r)})),b(t,e),$().appendChild(t),ae($())}catch(e){re(),C()}},ae=function(e){var t,n,r,i,a,o=document.createElement("div");o.id="popupButtonAdditionalInformationDiv",o.style.cssText="text-align: left";var c=document.createElement("div");c.id="errorMessageButtonClick",(t=h("".concat(g({iconName:"rocket_icon.svg",iconSize:"14px"})," Basic"),"popupButtonAdditionalInformation")).style.width="80px",oe(t,"basic-audit"),o.appendChild(t),(n=h("".concat(g({iconName:"brain_icon.svg",iconSize:"14px"})," AI"),"popupAIAudit")).style.width="80px",oe(n,"ai-audit"),o.appendChild(n),(a=h("".concat(g({iconName:"pin_icon.svg",iconSize:"14px"})," Teleport"),"popupTeleport")).style.width="80px",oe(a,"teleport"),o.appendChild(a),(r=h("".concat(g({iconName:"half_star_icon.svg",iconSize:"14px"})," Review"),"popupReviewAudit")).style.width="80px",oe(r,"review-audit"),o.appendChild(r),(i=h("".concat(g({iconName:"megaphone_icon.svg",iconSize:"14px"})," Post"),"popupPostAudit")).style.width="80px",oe(i,"post-audit"),o.appendChild(i),o.appendChild(c),e.appendChild(o)},oe=function(e,t){e.onclick=function(){try{e.disabled=!0,setTimeout((function(){e.disabled=!1}),3e3),E(te(),X.ExactLink,X,t)}catch(e){document.getElementById("errorMessageButtonClick").innerText="An error occured. Sorry for the inconvenience."}}},ce=function(){J=ee(),function(e){try{re();var t=document.createElement("img");t.setAttribute("class",c),t.src=chrome.runtime.getURL("imgs/loading.gif"),t.style.cssText="height: 35px; margin-left: 0; margin-top: -8px; display: block; margin-top: 7px;",e.appendChild(t)}catch(e){re(),C()}}($()),function(e,t){var n=Math.floor(1*Math.random()*1e3);setTimeout((function(){e()}),n)}(ne)},de=function(e){Array.from(e).forEach((function(e){var t=se(e.getAttribute("data-cid"));t.querySelectorAll("button").forEach((function(e){e.style.fontSize="11px",e.style.width="65px"})),ue(e.firstChild,a.googleSearchResultPage),e.firstChild.appendChild(t)}))},se=function(e){var t=document.createElement("div");t.style.cssText="text-align: left;";var n=function(e,t){var n=document.createElement("button");return n.style.cssText="margin-top: 3px; margin-bottom: 3px; width: 95px; margin-right: 2px; line-height: 1.5; border: 2px solid rgb(204, 77, 41); background-color: rgb(255, 200, 185); color: rgb(33, 37, 41); font-size: 12px; padding: 3px 2px; display: inline-block; border-radius: 3px; cursor: pointer;",n.innerHTML=e,n.onclick=t,n};return t.appendChild(n("".concat(g({iconName:"rocket_icon.svg",iconSize:"12px"})," Basic"),(function(t){t.stopPropagation(),E("https://"+window.location.hostname+"/maps?cid="+e,X.ExactLink,X,"basic-audit")}))),t.appendChild(n("".concat(g({iconName:"brain_icon.svg",iconSize:"12px"})," \n      AI"),(function(t){t.stopPropagation(),E("https://"+window.location.hostname+"/maps?cid="+e,X.ExactLink,X,"ai-audit")}))),t.appendChild(n("".concat(g({iconName:"pin_icon.svg",iconSize:"12px"})," Teleport"),(function(t){t.stopPropagation(),E("https://"+window.location.hostname+"/maps?cid="+e,X.ExactLink,X,"teleport")}))),t.appendChild(n("".concat(g({iconName:"half_star_icon.svg",iconSize:"12px"})," Review"),(function(t){t.stopPropagation(),E("https://"+window.location.hostname+"/maps?cid="+e,X.ExactLink,X,"review-audit")}))),t.appendChild(n("".concat(g({iconName:"megaphone_icon.svg",iconSize:"12px"})," Post"),(function(t){t.stopPropagation(),E("https://"+window.location.hostname+"/maps?cid="+e,X.ExactLink,X,"post-audit")}))),t},le=function(){var e=setInterval((function(){try{0===document.querySelectorAll(".local-finder-search-pane-audit-btn").length&&document.querySelectorAll("a[data-cid]:not([aria-hidden])").forEach((function(e){var t=function(e){var t=document.createElement("div");t.className="local-finder-search-pane-audit-btn",t.style.cssText="text-align: left; display: flex; justify-content: left; padding-left: 15px; padding-right: 15px; padding-bottom: 15px;";var n=function(e,t){var n=document.createElement("button");return n.style.cssText="margin-top: 3px; margin-bottom: 3px; \n    width: 70px; margin-right: 2px; line-height: 1.3; border: 2px solid rgb(204, 77, 41); \n    background-color: rgb(255, 200, 185); color: rgb(33, 37, 41); font-size: 12px; \n    padding: 3px 2px; display: inline-block; border-radius: 3px; cursor: pointer;",n.innerHTML=e,n.onclick=t,n};return t.appendChild(n("".concat(g({iconName:"rocket_icon.svg",iconSize:"12px"})," Basic"),(function(t){t.stopPropagation(),E("https://"+window.location.hostname+"/maps?cid="+e,X.ExactLink,X,"basic-audit")}))),t.appendChild(n("".concat(g({iconName:"brain_icon.svg",iconSize:"12px"})," \n    AI"),(function(t){t.stopPropagation(),E("https://"+window.location.hostname+"/maps?cid="+e,X.ExactLink,X,"ai-audit")}))),t.appendChild(n("".concat(g({iconName:"pin_icon.svg",iconSize:"12px"})," Teleport"),(function(t){t.stopPropagation(),E("https://"+window.location.hostname+"/maps?cid="+e,X.ExactLink,X,"teleport")}))),t.appendChild(n("".concat(g({iconName:"half_star_icon.svg",iconSize:"12px"})," Review"),(function(t){t.stopPropagation(),E("https://"+window.location.hostname+"/maps?cid="+e,X.ExactLink,X,"review-audit")}))),t.appendChild(n("".concat(g({iconName:"megaphone_icon.svg",iconSize:"12px"})," Post"),(function(t){t.stopPropagation(),E("https://"+window.location.hostname+"/maps?cid="+e,X.ExactLink,X,"post-audit")}))),t}(e.getAttribute("data-cid")),n=e.parentNode.parentNode.parentNode;ue(n,a.localFinderSearchResultPane),n.appendChild(t)}))}catch(t){clearInterval(e),document.querySelectorAll(".local-finder-search-pane-audit-btn").forEach((function(e){return e.remove()}))}}),1e3)},ue=function(e,t){try{var n="";try{n=e.querySelector("div>div:nth-child(2)").firstChild.nextSibling.textContent.split("·")[1].trim()}catch(t){try{n=e.firstChild.nextSibling.querySelector("div>div:nth-child(2)").firstChild.nextSibling.textContent.split("·")[1].trim()}catch(t){try{n=e.querySelector("div:nth-child(2)").nextSibling.firstChild.nextSibling.textContent.split("·")[1].trim()}catch(e){}}}var r=document.createElement("div");t===a.localFinderSearchResultPane?r.style.cssText="position: relative; margin-left: 15px;":r.style.cssText="position: relative;",b(r,[n],t),e.appendChild(r)}catch(e){}},pe=function(){return F((function(){var e=he();e.length>0?j(e):H("No businesses found")}))},he=function(){var e=document.querySelectorAll("a[data-cid]:not([aria-hidden])"),t=[],n=0;return e.forEach((function(e){var r;if(!me(e)){var i=null===(r=e.querySelector("div > div[role='heading'] > span"))||void 0===r?void 0:r.textContent,a=e.getAttribute("data-cid");t.push({businessName:i,cid:a,rank:++n,businessUrl:"https://"+window.location.hostname+"/maps?cid="+a})}})),t},me=function(e){var t,n=e.parentElement.parentElement.parentElement;return!!(null==n||null===(t=n.querySelector("div>div>div>span[tabindex='0']"))||void 0===t||null===(t=t.nextSibling)||void 0===t?void 0:t.querySelector("span>span>span > g-dialog"))},fe=function(e){var t=Array.from(e).slice(2).filter((function(e){var t;return null===(t=e.querySelector("div>div>a"))||void 0===t||null===(t=t.href)||void 0===t?void 0:t.includes("/maps/place")}));return t.forEach((function(e){try{e.ads=function(e){var t,n,r=!1,i=null===(t=e.querySelector("div>div:nth-child(2)>div>div"))||void 0===t?void 0:t.children;i&&(r=4===i.length&&"SPAN"===i[0].tagName&&"SPAN"===i[1].tagName&&"BUTTON"===i[2].tagName),(null===(n=e.querySelector("div>div:nth-child(2)>div>div>div:nth-child(2)>div>div:nth-child(3)>div>span"))||void 0===n?void 0:n.innerText)&&!1===r&&(r=!0);var a=function(e){var t=e.querySelectorAll("a"),n=!1;return t.forEach((function(e){var t=e.getAttribute("href");t&&t.includes("/aclk?")&&(n=!0)})),n}(e),o=function(e){return!!(null==e?void 0:e.querySelector("div>h1>span>span>button[aria-haspopup='true']"))}(e);return r||a||o}(e)?1:0}catch(t){e.ads=0}})),t},ve=function(e,t,n,r){var i=new URLSearchParams(t.toString());return i.append("businesses",JSON.stringify(r)),i.append("searchedOnce",!0),i.append("teleport-business",JSON.stringify(n)),"".concat(e,"?").concat(i.toString())};function ge(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ye(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function we(e){ye(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function be(e,t){ye(2,arguments);var n=we(e).getTime(),r=ge(t);return new Date(n+r)}function xe(e,t){return ye(2,arguments),be(e,36e5*ge(t))}function Se(e,t){ye(2,arguments);var n=we(e),r=ge(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function Te(e,t){return ye(2,arguments),Se(e,7*ge(t))}function Ne(e,t){return ye(2,arguments),be(e,6e4*ge(t))}var qe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Ce(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var ke,Ee={date:Ce({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Ce({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Ce({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Pe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Ae(e){return function(t,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=i.width?String(i.width):a;r=e.formattingValues[o]||e.formattingValues[a]}else{var c=e.defaultWidth,d=i.width?String(i.width):e.defaultWidth;r=e.values[d]||e.values[c]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Me(e){return function(t,n){var r=String(t),i=n||{},a=i.width,o=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],c=r.match(o);if(!c)return null;var d,s=c[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth];return d="[object Array]"===Object.prototype.toString.call(l)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].test(s))return n}(l):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n].test(s))return n}(l),d=e.valueCallback?e.valueCallback(d):d,{value:d=i.valueCallback?i.valueCallback(d):d,rest:r.slice(s.length)}}}const Oe={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof qe[e]?qe[e]:1===t?qe[e].one:qe[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:Ee,formatRelative:function(e,t,n,r){return Pe[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Ae({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Ae({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Ae({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Ae({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Ae({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(ke={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),r=t||{},i=n.match(ke.matchPattern);if(!i)return null;var a=i[0],o=n.match(ke.parsePattern);if(!o)return null;var c=ke.valueCallback?ke.valueCallback(o[0]):o[0];return{value:c=r.valueCallback?r.valueCallback(c):c,rest:n.slice(a.length)}}),era:Me({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Me({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Me({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Me({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Me({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ue(e,t){return ye(2,arguments),be(e,-ge(t))}function De(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const Le=function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return De("yy"===t?r%100:r,t.length)},Re=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):De(n+1,2)},Ie=function(e,t){return De(e.getUTCDate(),t.length)},Be=function(e,t){return De(e.getUTCHours()%12||12,t.length)},ze=function(e,t){return De(e.getUTCHours(),t.length)},He=function(e,t){return De(e.getUTCMinutes(),t.length)},_e=function(e,t){return De(e.getUTCSeconds(),t.length)},Ye=function(e,t){var n=t.length,r=e.getUTCMilliseconds();return De(Math.floor(r*Math.pow(10,n-3)),t.length)};function Fe(e){ye(1,arguments);var t=we(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function Ge(e){ye(1,arguments);var t=we(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Fe(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=Fe(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function We(e){ye(1,arguments);var t=we(e),n=Fe(t).getTime()-function(e){ye(1,arguments);var t=Ge(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),Fe(n)}(t).getTime();return Math.round(n/6048e5)+1}function je(e,t){ye(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,a=null==i?0:ge(i),o=null==n.weekStartsOn?a:ge(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=we(e),d=c.getUTCDay(),s=(d<o?7:0)+d-o;return c.setUTCDate(c.getUTCDate()-s),c.setUTCHours(0,0,0,0),c}function Je(e,t){ye(1,arguments);var n=we(e,t),r=n.getUTCFullYear(),i=t||{},a=i.locale,o=a&&a.options&&a.options.firstWeekContainsDate,c=null==o?1:ge(o),d=null==i.firstWeekContainsDate?c:ge(i.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var s=new Date(0);s.setUTCFullYear(r+1,0,d),s.setUTCHours(0,0,0,0);var l=je(s,t),u=new Date(0);u.setUTCFullYear(r,0,d),u.setUTCHours(0,0,0,0);var p=je(u,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=p.getTime()?r:r-1}function Qe(e,t){ye(1,arguments);var n=we(e),r=je(n,t).getTime()-function(e,t){ye(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,a=null==i?1:ge(i),o=null==n.firstWeekContainsDate?a:ge(n.firstWeekContainsDate),c=Je(e,t),d=new Date(0);return d.setUTCFullYear(c,0,o),d.setUTCHours(0,0,0,0),je(d,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function Xe(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;if(0===a)return n+String(i);var o=t||"";return n+String(i)+o+De(a,2)}function Ke(e,t){return e%60==0?(e>0?"-":"+")+De(Math.abs(e)/60,2):Ve(e,t)}function Ve(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+De(Math.floor(i/60),2)+n+De(i%60,2)}const Ze={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Le(e,t)},Y:function(e,t,n,r){var i=Je(e,r),a=i>0?i:1-i;return"YY"===t?De(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):De(a,t.length)},R:function(e,t){return De(Ge(e),t.length)},u:function(e,t){return De(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return De(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return De(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Re(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return De(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=Qe(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):De(i,t.length)},I:function(e,t,n){var r=We(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):De(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ie(e,t)},D:function(e,t,n){var r=function(e){ye(1,arguments);var t=we(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):De(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return De(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return De(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return De(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Be(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ze(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):De(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):De(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):He(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):_e(e,t)},S:function(e,t){return Ye(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return Ke(i);case"XXXX":case"XX":return Ve(i);default:return Ve(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return Ke(i);case"xxxx":case"xx":return Ve(i);default:return Ve(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Xe(i,":");default:return"GMT"+Ve(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Xe(i,":");default:return"GMT"+Ve(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return De(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return De((r._originalDate||e).getTime(),t.length)}};function $e(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function et(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var tt={p:et,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),i=r[1],a=r[2];if(!a)return $e(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",$e(i,t)).replace("{{time}}",et(a,t))}};const nt=tt;function rt(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var it=["D","DD"],at=["YY","YYYY"];function ot(e){return-1!==it.indexOf(e)}function ct(e){return-1!==at.indexOf(e)}function dt(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var st=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ut=/^'([^]*?)'?$/,pt=/''/g,ht=/[a-zA-Z]/;function mt(e,t,n){ye(2,arguments);var r=String(t),i=n||{},a=i.locale||Oe,o=a.options&&a.options.firstWeekContainsDate,c=null==o?1:ge(o),d=null==i.firstWeekContainsDate?c:ge(i.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var s=a.options&&a.options.weekStartsOn,l=null==s?0:ge(s),u=null==i.weekStartsOn?l:ge(i.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var p=we(e);if(!function(e){ye(1,arguments);var t=we(e);return!isNaN(t)}(p))throw new RangeError("Invalid time value");var h=Ue(p,rt(p)),m={firstWeekContainsDate:d,weekStartsOn:u,locale:a,_originalDate:p};return r.match(lt).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,nt[t])(e,a.formatLong,m):e})).join("").match(st).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return n.match(ut)[1].replace(pt,"'");var o=Ze[r];if(o)return!i.useAdditionalWeekYearTokens&&ct(n)&&dt(n,t,e),!i.useAdditionalDayOfYearTokens&&ot(n)&&dt(n,t,e),o(h,n,a.localize,m);if(r.match(ht))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("")}var ft=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;setTimeout((function(){var r=document.querySelectorAll("[data-show-pinned-post]")[0];r.firstChild.scrollTo(0,r.firstChild.scrollHeight);var i=document.querySelectorAll("article[data-post-id][data-feature-id]:not([data-post-type])").length;i<t&&n!==i?e(t,i):wt()}),2e3)},vt=function(e,t){chrome.storage.local.get(["ge-business-details-key"],(function(n){var r=new URL(window.location.href).searchParams.get("unique-code");gt(n["ge-business-details-key"],e,r,t)}))},gt=function(t,n,r,i){for(var a=t.length-1;a>=0;a--)if(r&&t[a].key.substring(0,30)===r.substring(0,30)){t[a].value["post-details"]=n;var o=e["audit-dashboard"]["dashboard-url"];m(o+"?ge-mode=business-details&audit-type=post&unique-code="+encodeURIComponent(r)+"&isPostExistForBusiness="+(i?"true":"false")+"&dashboard-data="+encodeURIComponent(JSON.stringify(t[a].value)),!0)}},yt=function(e){var t={"text-section":null,"image-video-section":null};return[3,4].includes(e.firstChild.childElementCount)?(t["image-video-section"]=e.firstChild.children[1],t["text-section"]=e.firstChild.children[2]):e.firstChild.children[1].querySelectorAll("img").length>0||e.firstChild.children[1].querySelectorAll("video").length>0?t["image-video-section"]=e.firstChild.children[1]:t["text-section"]=e.firstChild.children[1],t},wt=function(){var e=document.querySelectorAll("article[data-post-id][data-feature-id]:not([data-post-type])");!function(e){for(var t,n=[],r=0;r<e.length;r++){t=e[r].querySelectorAll("span");for(var i=0;i<t.length;i++)"more"===t[i].textContent.toLowerCase()&&n.push(t[i])}n.forEach((function(e){return e.click()}))}(e),setTimeout((function(){for(var t,n,r,i,a=[],o=0,c=0,d=0,s=0,l=0,h=e.length,m=0;m<e.length;m++){var f=(n=e[m].firstChild.children[0].children[1].children[1].innerText,r=void 0,i=void 0,r=new Date,i=n.split(" "),r=-1!==n.toLowerCase().indexOf("hour")?-1!==i[0].indexOf("an")?xe(r,-1):xe(r,-parseInt(i[0])):-1!==n.toLowerCase().indexOf("day")?-1!==i[0].indexOf("a")?Se(r,-1):Se(r,-parseInt(i[0])):-1!==n.toLowerCase().indexOf("week")?-1!==i[0].indexOf("a")?Te(r,-1):Te(r,-parseInt(i[0])):-1!==n.toLowerCase().indexOf("min")?-1!==i[0].indexOf("a")?Ne(r,-1):Ne(r,-parseInt(i[0])):mt(new Date(n),"MM-dd-yyyy"));a.push(mt(new Date(f),"MM-dd-yyyy"));var v=yt(e[m]);v["image-video-section"]&&v["image-video-section"].querySelectorAll("img").length>0&&d++,v["image-video-section"]&&v["image-video-section"].querySelectorAll("video").length>0&&s++,v["text-section"]&&v["text-section"].querySelectorAll("a").length>0&&l++,v["text-section"]&&(o+=v["text-section"].innerText.replaceAll("\n"," ").length,c+=v["text-section"].innerText.trim().split(/\s+/).length)}var g=p(a).reverse(),y=[];g.forEach((function(e){return y.push(u(e,a))})),t={"xy-axis-values":{"graph-x":g,"graph-y":y},"total-post-with-image":d,"total-post-with-video":s,"total-post-with-links":l,"average-post-characters":(o/h).toFixed(2),"average-post-words":(c/h).toFixed(2),"total-number-of-post":h},vt(t,!0)}),2e3)},bt=function(){var t;if(new URL(window.location.href).searchParams.get("unique-code"))if(-1!=(t=document.documentElement.innerHTML).indexOf("Latest from the owner")||-1!=t.indexOf("View previous updates on Google")){f("GMB Everywhere is processing.<br>Stay on this tab to continue processing.");var n=setInterval((function(){if(document.querySelectorAll("[data-show-pinned-post]").length>0){clearInterval(n);var t=e["audit-dashboard"]["maximum-number-of-posts-needed-scraping"];ft(t)}}),500)}else vt(null,!1);else Utility.createFullPageLoader("An error occured. Please try again.",!0)};function xt(e,t){ye(2,arguments);var n=we(e),r=ge(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),a=new Date(n.getTime());return a.setMonth(n.getMonth()+r+1,0),i>=a.getDate()?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}function St(e,t){return ye(2,arguments),xt(e,12*ge(t))}function Tt(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Nt(e,t,n){ye(2,arguments);var r=n||{},i=r.locale,a=i&&i.options&&i.options.weekStartsOn,o=null==a?0:ge(a),c=null==r.weekStartsOn?o:ge(r.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=we(e),s=ge(t),l=((s%7+7)%7<c?7:0)+s-d.getUTCDay();return d.setUTCDate(d.getUTCDate()+l),d}var qt=/^(1[0-2]|0?\d)/,Ct=/^(3[0-1]|[0-2]?\d)/,kt=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Et=/^(5[0-3]|[0-4]?\d)/,Pt=/^(2[0-3]|[0-1]?\d)/,At=/^(2[0-4]|[0-1]?\d)/,Mt=/^(1[0-1]|0?\d)/,Ot=/^(1[0-2]|0?\d)/,Ut=/^[0-5]?\d/,Dt=/^[0-5]?\d/,Lt=/^\d/,Rt=/^\d{1,2}/,It=/^\d{1,3}/,Bt=/^\d{1,4}/,zt=/^-?\d+/,Ht=/^-?\d/,_t=/^-?\d{1,2}/,Yt=/^-?\d{1,3}/,Ft=/^-?\d{1,4}/,Gt=/^([+-])(\d{2})(\d{2})?|Z/,Wt=/^([+-])(\d{2})(\d{2})|Z/,jt=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Jt=/^([+-])(\d{2}):(\d{2})|Z/,Qt=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Xt(e,t,n){var r=t.match(e);if(!r)return null;var i=parseInt(r[0],10);return{value:n?n(i):i,rest:t.slice(r[0].length)}}function Kt(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function Vt(e,t){return Xt(zt,e,t)}function Zt(e,t,n){switch(e){case 1:return Xt(Lt,t,n);case 2:return Xt(Rt,t,n);case 3:return Xt(It,t,n);case 4:return Xt(Bt,t,n);default:return Xt(new RegExp("^\\d{1,"+e+"}"),t,n)}}function $t(e,t,n){switch(e){case 1:return Xt(Ht,t,n);case 2:return Xt(_t,t,n);case 3:return Xt(Yt,t,n);case 4:return Xt(Ft,t,n);default:return Xt(new RegExp("^-?\\d{1,"+e+"}"),t,n)}}function en(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function tn(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var a=i+50;n=e+100*Math.floor(a/100)-(e>=a%100?100:0)}return r?n:1-n}var nn=[31,28,31,30,31,30,31,31,30,31,30,31],rn=[31,29,31,30,31,30,31,31,30,31,30,31];function an(e){return e%400==0||e%4==0&&e%100!=0}const on={G:{priority:140,parse:function(e,t,n,r){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}},set:function(e,t,n,r){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,n,r){var i=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Zt(4,e,i);case"yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return Zt(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,r){var i=e.getUTCFullYear();if(n.isTwoDigitYear){var a=tn(n.year,i);return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,n,r){var i=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Zt(4,e,i);case"Yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return Zt(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,r){var i=Je(e,r);if(n.isTwoDigitYear){var a=tn(n.year,i);return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),je(e,r)}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),je(e,r)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,n,r){return $t("R"===t?4:t.length,e)},set:function(e,t,n,r){var i=new Date(0);return i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0),Fe(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,n,r){return $t("u"===t?4:t.length,e)},set:function(e,t,n,r){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,n,r){switch(t){case"Q":case"QQ":return Zt(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,r){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,n,r){switch(t){case"q":case"qq":return Zt(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,r){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,n,r){var i=function(e){return e-1};switch(t){case"M":return Xt(qt,e,i);case"MM":return Zt(2,e,i);case"Mo":return n.ordinalNumber(e,{unit:"month",valueCallback:i});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,n,r){var i=function(e){return e-1};switch(t){case"L":return Xt(qt,e,i);case"LL":return Zt(2,e,i);case"Lo":return n.ordinalNumber(e,{unit:"month",valueCallback:i});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,n,r){switch(t){case"w":return Xt(Et,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return Zt(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,r){return je(function(e,t,n){ye(2,arguments);var r=we(e),i=ge(t),a=Qe(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*a),r}(e,n,r),r)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,n,r){switch(t){case"I":return Xt(Et,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return Zt(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,r){return Fe(function(e,t){ye(2,arguments);var n=we(e),r=ge(t),i=We(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n,r),r)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,n,r){switch(t){case"d":return Xt(Ct,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return Zt(t.length,e)}},validate:function(e,t,n){var r=an(e.getUTCFullYear()),i=e.getUTCMonth();return r?t>=1&&t<=rn[i]:t>=1&&t<=nn[i]},set:function(e,t,n,r){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,n,r){switch(t){case"D":case"DD":return Xt(kt,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return Zt(t.length,e)}},validate:function(e,t,n){return an(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,n,r){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,n,r){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return(e=Nt(e,n,r)).setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Zt(t.length,e,i);case"eo":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return(e=Nt(e,n,r)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Zt(t.length,e,i);case"co":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return(e=Nt(e,n,r)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,n,r){var i=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return Zt(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});default:return n.day(e,{width:"wide",context:"formatting",valueCallback:i})||n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(e,t,n){return t>=1&&t<=7},set:function(e,t,n,r){return e=function(e,t){ye(2,arguments);var n=ge(t);n%7==0&&(n-=7);var r=we(e),i=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(e,n,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,n,r){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(en(n),0,0,0),e},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(e,t,n,r){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(en(n),0,0,0),e},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(e,t,n,r){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(en(n),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,n,r){switch(t){case"h":return Xt(Ot,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return Zt(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=12},set:function(e,t,n,r){var i=e.getUTCHours()>=12;return i&&n<12?e.setUTCHours(n+12,0,0,0):i||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,n,r){switch(t){case"H":return Xt(Pt,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return Zt(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=23},set:function(e,t,n,r){return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,n,r){switch(t){case"K":return Xt(Mt,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return Zt(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(e,t,n,r){switch(t){case"k":return Xt(At,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return Zt(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=24},set:function(e,t,n,r){var i=n<=24?n%24:n;return e.setUTCHours(i,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,n,r){switch(t){case"m":return Xt(Ut,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return Zt(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,r){return e.setUTCMinutes(n,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,n,r){switch(t){case"s":return Xt(Dt,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return Zt(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,r){return e.setUTCSeconds(n,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,n,r){return Zt(t.length,e,(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))},set:function(e,t,n,r){return e.setUTCMilliseconds(n),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,n,r){switch(t){case"X":return Kt(Gt,e);case"XX":return Kt(Wt,e);case"XXXX":return Kt(jt,e);case"XXXXX":return Kt(Qt,e);default:return Kt(Jt,e)}},set:function(e,t,n,r){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,n,r){switch(t){case"x":return Kt(Gt,e);case"xx":return Kt(Wt,e);case"xxxx":return Kt(jt,e);case"xxxxx":return Kt(Qt,e);default:return Kt(Jt,e)}},set:function(e,t,n,r){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,n,r){return Vt(e)},set:function(e,t,n,r){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,n,r){return Vt(e)},set:function(e,t,n,r){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}};var cn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sn=/^'([^]*?)'?$/,ln=/''/g,un=/\S/,pn=/[a-zA-Z]/;function hn(e,t,n,r){ye(3,arguments);var i=String(e),a=String(t),o=r||{},c=o.locale||Oe;if(!c.match)throw new RangeError("locale must contain match property");var d=c.options&&c.options.firstWeekContainsDate,s=null==d?1:ge(d),l=null==o.firstWeekContainsDate?s:ge(o.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=c.options&&c.options.weekStartsOn,p=null==u?0:ge(u),h=null==o.weekStartsOn?p:ge(o.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===a)return""===i?we(n):new Date(NaN);var m,f={firstWeekContainsDate:l,weekStartsOn:h,locale:c},v=[{priority:10,subPriority:-1,set:mn,index:0}],g=a.match(dn).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,nt[t])(e,c.formatLong,f):e})).join("").match(cn),y=[];for(m=0;m<g.length;m++){var w=g[m];!o.useAdditionalWeekYearTokens&&ct(w)&&dt(w,a,e),!o.useAdditionalDayOfYearTokens&&ot(w)&&dt(w,a,e);var b=w[0],x=on[b];if(x){var S=x.incompatibleTokens;if(Array.isArray(S)){for(var T=void 0,N=0;N<y.length;N++){var q=y[N].token;if(-1!==S.indexOf(q)||q===b){T=y[N];break}}if(T)throw new RangeError("The format string mustn't contain `".concat(T.fullToken,"` and `").concat(w,"` at the same time"))}else if("*"===x.incompatibleTokens&&y.length)throw new RangeError("The format string mustn't contain `".concat(w,"` and any other token at the same time"));y.push({token:b,fullToken:w});var C=x.parse(i,w,c.match,f);if(!C)return new Date(NaN);v.push({priority:x.priority,subPriority:x.subPriority||0,set:x.set,validate:x.validate,value:C.value,index:v.length}),i=C.rest}else{if(b.match(pn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if("''"===w?w="'":"'"===b&&(w=w.match(sn)[1].replace(ln,"'")),0!==i.indexOf(w))return new Date(NaN);i=i.slice(w.length)}}if(i.length>0&&un.test(i))return new Date(NaN);var k=v.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return v.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),E=we(n);if(isNaN(E))return new Date(NaN);var P=Ue(E,rt(E)),A={};for(m=0;m<k.length;m++){var M=k[m];if(M.validate&&!M.validate(P,M.value,f))return new Date(NaN);var O=M.set(P,A,M.value,f);O[0]?(P=O[0],Tt(A,O[1])):P=O}return P}function mn(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}var fn=["two-word-frequencies"],vn=["one-word-frequencies"];function gn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}}(e,t)||bn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wn(e){return function(e){if(Array.isArray(e))return xn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(e,t){if(e){if("string"==typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sn,Tn=function(e){var t={"is-local-guide":!1,"number-of-reviews-given":0,"number-of-photos-provided":0};try{return e.innerText.split("·").forEach((function(e){-1!=e.indexOf("Local Guide")&&(t["is-local-guide"]=!0),-1!=e.indexOf("review")&&(t["number-of-reviews-given"]=e.split(" ")[0].replace(/\D/g,"")),-1!=e.indexOf("photo")&&(t["number-of-photos-provided"]=e.split(" ")[0].replace(/\D/g,""))})),t}catch(e){return t}},Nn=function(e){var t=JSON.stringify(encodeURIComponent(e)).length;if(t>650)for(var n=t;n>=650;)e.pop(),n=JSON.stringify(encodeURIComponent(e)).length;return e},qn=function(e){var t={hours:0,days:0,weeks:0,months:0,years:0,decades:0};try{var n=e.split(" ");-1!==e.toLowerCase().indexOf("hour")?-1!==n[0].indexOf("an")?t.hours=1:t.hours=parseInt(n[0]):-1!==e.toLowerCase().indexOf("minutes")?t.hours=1:-1!==e.toLowerCase().indexOf("day")?-1!==n[0].indexOf("a")?t.days=1:t.days=parseInt(n[0]):-1!==e.toLowerCase().indexOf("week")?-1!==n[0].indexOf("a")?t.weeks=1:t.weeks=parseInt(n[0]):-1!==e.toLowerCase().indexOf("month")?-1!==n[0].indexOf("a")?t.months=1:t.months=parseInt(n[0]):-1!==e.toLowerCase().indexOf("year")?-1!==n[0].indexOf("a")?t.years=1:t.years=parseInt(n[0]):-1!==e.toLowerCase().indexOf("decade")&&(-1!==n[0].indexOf("a")?t.decades=1:t.decades=parseInt(n[0]))}catch(e){w({auditType:"review",error:e,newTab:!1})}return t},Cn=function(){var e=[],t=[],n=0,r=0;try{var a=document.querySelectorAll("div[jsdata] > div[data-ved] div[data-id][data-hveid]");n=parseFloat(document.querySelector("g-review-stars").parentNode.querySelector("span").innerText),r=parseFloat(document.querySelector("g-review-stars").nextElementSibling.innerText.split(" ")[0]);for(var o=0;o<a.length;o++){var c,d,s=void 0,l=void 0;try{s=a[o].querySelector("div").nextElementSibling.querySelector("div").getAttribute("aria-label").split(" ")[1],l=a[o].querySelector("div").nextElementSibling.querySelector("div").nextElementSibling.innerText}catch(e){}l=null===(c=l)||void 0===c?void 0:c.replace(/edited\s*/i,"").trim();var u=(null===(d=a[o].querySelector(":scope > div:nth-child(3)").querySelector("div"))||void 0===d?void 0:d.innerText)||"";e.push({"is-a-local-guide":Tn(En(a[o]))["is-local-guide"],"reviewer-name":a[o].querySelector("div > a > div").nextElementSibling.querySelector("div").innerText,"reviewer-information":"","number-of-photos-in-review":a[o].querySelectorAll('div[role="listitem"]>img').length,"review-star-rating":s,"review-text":u,"review-time":l,"review-time-organized":qn(l),"number-of-review-provided-by-reviewer":Tn(En(a[o]))["number-of-reviews-given"],"number-of-photos-provided-by-reviewer":Tn(En(a[o]))["number-of-photos-provided"]});var p=i.reduce((function(e,t){return e.replace(t,"")}),u).split(" ");t.push.apply(t,wn(p))}}catch(e){return void w({auditType:"review",error:e,newTab:!1})}chrome.storage.local.get(["ge-business-details-key"],(function(i){var a=new URL(window.location.href).searchParams.get("unique-code");Dn({resultOfStorage:i["ge-business-details-key"],finalReviewArrayList:e,currentRating:n,reviewWords:t,totalReviewCount:r,uniqueCodeOnPage:a})}))},kn=function(e){try{return e.querySelectorAll(":scope>div>div:nth-child(3)")[0]}catch(e){}},En=function(e){try{return e.querySelector("div > div > a > div").nextElementSibling.querySelector("div").nextElementSibling}catch(e){}},Pn=function(e,t){var n={},r={};try{for(var i=0;i<e.length;i++){var a,o=e[i].toLowerCase(),c=null===(a=e[i+1])||void 0===a?void 0:a.toLowerCase();!o||t.indexOf(o)>0||1===o.length||(n[o]?n[o]+=1:n[o]=1,!c||t.indexOf(c)>0||1===c.length||(r["".concat(o," ").concat(c)]?r["".concat(o," ").concat(c)]+=1:r["".concat(o," ").concat(c)]=1))}n=Object.keys(n).map((function(e){var t={};return t[String(e).slice(0,20)]=n[e],t})),r=Object.keys(r).map((function(e){var t={};return t[String(e).slice(0,30)]=r[e],t}))}catch(e){}return{oneWordFrequencies:n,twoWordFrequencies:r}},An=function(e,t,n){for(var r=[],i=[],a=[],o=0;o<e.length;o++){var c=null,d=0;0!=e[o]["review-time-organized"].hours?(c=xe(new Date,-e[o]["review-time-organized"].hours),r.push(c)):0!==e[o]["review-time-organized"].days?(c=Se(new Date,-e[o]["review-time-organized"].days),r.push(c)):0!==e[o]["review-time-organized"].weeks?(c=Se(new Date,7*-e[o]["review-time-organized"].weeks),r.push(c)):0!==e[o]["review-time-organized"].months?(c=xt(new Date,-e[o]["review-time-organized"].months),r.push(c)):0!==e[o]["review-time-organized"].years&&(c=e[o]["review-time-organized"].years,d=e[o]["review-time-organized"].years,i.push(e[o]["review-time-organized"].years)),a.push({date:c,year:d,rating:parseFloat(e[o]["review-star-rating"])})}var s,l=function(e){for(var t=p(e),n=[],r=0;r<t.length;r++)n.push({"year-past-in-review":t[r],"number-of-review":u(t[r],e)});return n}(i),h=function(e,t){for(var n=[],r=[],i=function(i){for(var a=t.filter((function(t){return t.year===e[i]["year-past-in-review"]})),o=a.reduce((function(e,t){return t.rating+e}),0)/a.length,c=e[i]["number-of-review"],d=0;d<c;d++){var s=xt(St(new Date,-e[i]["year-past-in-review"]),-d%12);n.push(s),r.push({date:s,year:parseInt(e[i]["year-past-in-review"]),rating:o})}},a=0;a<e.length;a++)i(a);return[n,r]}(l,a.filter((function(e){return e.year>0}))),m=yn(h,2),f=m[0],v=m[1],g=function(e){var t=e.map((function(e){try{e.date=mt(e.date,"MM/15/yyyy"),mt(new Date,"MM/yyyy")===mt(hn(e.date,"MM/dd/yyyy",new Date),"MM/yyyy")&&(e.date=mt(new Date,"MM/dd/yyyy"))}catch(e){w({auditType:"review",error:e,newTab:!1})}return e})).reduce((function(e,t){return e[t.date]=[].concat(wn(e[t.date]||[]),[t]),e}),{});return Object.keys(t).map((function(e){var n=t[e].reduce((function(e,t){return t.rating+e}),0)/t[e].length;return{date:e,rating:n<=5?parseFloat(n.toFixed(2)):5}}))}(a=[].concat(wn(a.filter((function(e){return 0===e.year}))),wn(v))),y=r.concat(f).map((function(e){return mt(e,"MM/15/yyyy")})),b=[];return p(y).forEach((function(e){s=u(e,y),mt(new Date,"MM/yyyy")===mt(hn(e,"MM/dd/yyyy",new Date),"MM/yyyy")&&(e=mt(new Date,"MM/dd/yyyy")),b.push({"month-year":e,"number-of-time-exist":s})})),[b,g]},Mn=function(e){var t=0,n=0,r=0,i=0;return e.forEach((function(e){0!==e["number-of-photos-in-review"]&&t++,1==e["is-a-local-guide"]&&n++,r+=parseInt(e["number-of-review-provided-by-reviewer"]),i+=parseInt(e["review-star-rating"])})),{"number-of-reviews-with-photos":t,"number-of-reviews-by-local-guides":n,"average-number-of-review-by-reviewer":(r/e.length).toFixed(2),"average-of-reviews-calculated":(i/e.length).toFixed(2)}},On=function(e,t,n,r){var i=[];e.sort((function(e,t){return hn(e["month-year"],"MM/dd/yyyy",new Date)-hn(t["month-year"],"MM/dd/yyyy",new Date)})).forEach((function(e,n){i.push([e["month-year"],e["number-of-time-exist"],t.filter((function(t){return t.date===e["month-year"]}))[0].rating])}));var a=i.map((function(e){return e[1]}));return i=(i=i.map((function(e,t){return e[1]=a.slice(0,t+1).reduce((function(e,t){return e+t})),e}))).map((function(e){return e[1]=e[1]+n.value["number-of-review"]-r.length,e}))},Un=function(e){return e.sort((function(e,t){var n=e[Object.keys(e)[0]],r=t[Object.keys(t)[0]];return n>r?-1:n<r?1:0}))},Dn=function(t){for(var n=t.resultOfStorage.length-1;n>=0;n--)if(t.uniqueCodeOnPage&&t.resultOfStorage[n].key===t.uniqueCodeOnPage){var i=yn(An(t.finalReviewArrayList,t.currentRating,t.totalReviewCount),2),a=i[0],o=i[1],c=On(a,o,t.resultOfStorage[n],t.finalReviewArrayList);t.resultOfStorage[n].value["xy-axis-Values"]=c;var d=Mn(t.finalReviewArrayList);t.resultOfStorage[n].value["review-calculated-values"]=d;var s=e["audit-dashboard"]["dashboard-url"],l=Pn(t.reviewWords,r),u=l.oneWordFrequencies,p=l.twoWordFrequencies;u=JSON.stringify(Nn(Un(u))),p=JSON.stringify(Nn(Un(p)));var h=Ln(s,{"ge-mode":"business-details","audit-type":"review","unique-code":t.uniqueCodeOnPage,"dashboard-data":JSON.stringify(t.resultOfStorage[n].value),"one-word-frequencies":u,"two-word-frequencies":p});m("".concat(s,"?").concat(h.toString()),!0)}},Ln=function(e,t){var n=Rn(e,t);if(n.length<7850)return new URLSearchParams(t);t["two-word-frequencies"];var r=gn(t,fn);if((n=Rn(e,r)).length<7850)return new URLSearchParams(r);r["one-word-frequencies"];var i=gn(r,vn);return n=Rn(e,i),new URLSearchParams(i)},Rn=function(e,t){var n=new URLSearchParams(t);return"".concat(e,"?").concat(n.toString())},In=function(){var e,t=!1;1===Sn?(e=document.getElementsByClassName("review-dialog-list")).length>0&&(e=e[0],t=!0):2===Sn&&((e=document.querySelectorAll(".review-dialog > c-wiz[data-feature-id] > div")).length>2&&(e=e[2],t=!0),(e=document.querySelectorAll("div[role='dialog'] > div > c-wiz[data-feature-id] > div")).length>2&&(e=e[2],t=!0)),t?e.scrollTo(0,e.scrollHeight):w({auditType:"review-audit",error:new Error("No valid element found to scroll to"),newTab:!1})},Bn=function e(t,n,r,a){setTimeout((function(){var o;o=1===Sn?document.getElementsByClassName("gws-localreviews__google-review").length:document.querySelectorAll("div[jsdata] > div[data-ved] div[data-id][data-hveid]").length,In(),o==t||o>=n||a>10?1==T()?function(){var e=[],t=[],n=0,r=0;try{var a=document.querySelectorAll(".gws-localreviews__general-reviews-block>div");n=parseFloat(document.querySelector("g-review-stars").parentNode.querySelector("span").innerText),r=parseFloat(document.querySelector("g-review-stars").parentNode.querySelector("div").innerText.split(" ")[0]),document.querySelectorAll(".review-more-link").forEach((function(e){e.click()}));for(var o=0;o<a.length;o++){var c=void 0,d=void 0;try{c=a[o].querySelector("div:nth-child(2)").querySelector(":scope > div:nth-child(4) > div > div > div").querySelector(":scope > span:nth-child(1)").getAttribute("aria-label").split(" ")[1],d=a[o].querySelector("div:nth-child(2)").querySelector(":scope > div:nth-child(4) > div > div > div").querySelector(":scope > span:nth-child(2)").innerText}catch(e){try{c=a[o].querySelector("div:nth-child(4)").querySelector("div").querySelectorAll("span")[0].getAttribute("aria-label").split(" ")[1],d=a[o].querySelector("div:nth-child(4)").querySelector("div").querySelectorAll("span")[2].innerText}catch(e){try{d=a[o].querySelector("g-review-stars+span").innerText,c=a[o].querySelector("div:nth-child(4)>div").querySelectorAll("g-review-stars>span")[0].getAttribute("aria-label").split(" ")[1]}catch(e){throw e}}}var s=a[o].querySelector("div>div:nth-child(2)>div:nth-child(4)>div>div>div:nth-child(2)").innerText;e.push({"is-a-local-guide":Tn(kn(a[o]))["is-local-guide"],"reviewer-name":a[o].querySelector("div:nth-child(1)").innerText,"reviewer-information":a[o].querySelector("div:nth-child(3)").innerText,"number-of-photos-in-review":a[o].querySelectorAll('[aria-label="Photos"]').length,"review-star-rating":c,"review-text":s,"review-time":d,"review-time-organized":qn(d),"number-of-review-provided-by-reviewer":Tn(kn(a[o]))["number-of-reviews-given"],"number-of-photos-provided-by-reviewer":Tn(kn(a[o]))["number-of-photos-provided"]});var l=i.reduce((function(e,t){return e.replace(t,"")}),s).split(" ");t.push.apply(t,wn(l))}}catch(e){return void w({auditType:"review",error:e,newTab:!1})}chrome.storage.local.get(["ge-business-details-key"],(function(i){var a=new URL(window.location.href).searchParams.get("unique-code");Dn({resultOfStorage:i["ge-business-details-key"],finalReviewArrayList:e,currentRating:n,reviewWords:t,totalReviewCount:r,uniqueCodeOnPage:a})}))}():(document.querySelectorAll('div[jsdata] > div[data-ved] div[data-id][data-hveid] > div:nth-child(3) > div > a[role="button"][data-ved]').forEach((function(e){e.click()})),setTimeout(Cn,1e3)):(r!=o||document.hidden?a=0:a++,r=o,In(),e(t,n,r,a))}),600)},zn=function(e){return F((function(){return function(e){var t=function(e){var t=[],n=0;return e.forEach((function(e){var r,i;if(null===(i=e.querySelector("div>div>div"))||i.hasAttribute("role")&&"heading"===i.getAttribute("role")){var a=null===(r=e.querySelector("div > div[role='heading'] > span"))||void 0===r?void 0:r.textContent,o=e.getAttribute("data-cid");t.push({businessName:a,cid:o,rank:++n,businessUrl:"https://"+window.location.hostname+"/maps?cid="+o})}})),t}(e);t.length>0?j(t):H("No businesses found")}(e)}))};!function(){var r="",i=d(),u=i.NotFound,p=[],m=[],v="GMB categories not found. Use the 'Share' link below to go to the business page to view the categories.",N="[loading]",q="category-list-display",k=!0;try{var P=function(e){var t,n,r=[],i="",a="";try{r=e[0][1][0][14][13],i=e[0][1][0][14][11],a=null!=e[0][1][0][14][178]?e[0][1][0][14][178][0][3]:"",null!=e[0][1][0][14][4]?(t=e[0][1][0][14][4][7],n=e[0][1][0][14][4][8]):(t=0,n=0)}catch(e){}try{r=e[0][1][1][14][13],i=e[0][1][1][14][11],a=null!=e[0][1][1][14][178]?e[0][1][1][14][178][0][3]:"",null!=e[0][1][1][14][4]?(t=e[0][1][1][14][4][7],n=e[0][1][1][14][4][8]):(t=0,n=0)}catch(e){}return{categories:r,phoneNumber:a,businessName:i,averageNumberOfReviews:n,averageReviewRating:t}},A=function(){var e;if(!(e=document.querySelectorAll('[jsaction="pane.rating.moreReviews"]').length>1?document.querySelectorAll('[jsaction="pane.rating.moreReviews"]')[0].innerText:document.querySelector('[jsaction$=".category"]')?document.querySelector('[jsaction$=".category"]').parentNode.parentNode.parentNode.parentNode.innerText:document.querySelectorAll('[jsaction="pane.rating.category"]')[0].parentNode.parentNode.parentNode.parentNode.firstChild.children[1].innerText))return{"average-review-rating":0,"number-of-reviews":0};var t=e.split("\n")[1].split(" ")[0].replace(/\D/g,"");return{"average-review-rating":e.split("\n")[0].replace(",","."),"number-of-reviews":parseInt(t)}},M=function(){var e=document.querySelector("h1.DUwDvf.lfPIob");if(e)return e.innerText.trim();try{if(e=document.querySelector(".google-symbols").parentNode.parentNode.parentNode.parentNode.parentNode.querySelector("div").nextSibling.querySelector(":scope div > div > div").querySelector(":scope > h1"))return e.innerText.trim()}catch(e){}},O=function(){return document.querySelectorAll('[jsaction="pane.rating.moreReviews"]').length>1?document.querySelectorAll('[jsaction="pane.rating.moreReviews"]')[0].parentNode.parentNode.parentNode:null!==document.querySelector('a[href="#"][target][jsaction]>div>div')?document.querySelector('a[href="#"][target][jsaction]>div>div').parentNode.parentNode.parentNode.parentNode.parentNode.firstChild.nextSibling.firstChild.firstChild.firstChild.nextSibling.firstChild:document.querySelector('[jsaction$=".category"]')?document.querySelector('[jsaction$=".category"]').parentNode.parentNode.parentNode.parentNode.parentNode:document.querySelectorAll('[jsaction="pane.rating.category"]')[0].parentNode.parentNode.parentNode.parentNode.parentNode},U=function(){try{var e=document.querySelector('[data-item-id="address"]').innerText;if(e)return e.trim()}catch(e){return""}},D=function(){try{var e=O().querySelector("."+c);e&&e.remove()}catch(e){}},L=function(e,t){e.onclick=function(){try{if(e.disabled=!0,setTimeout((function(){e.disabled=!1}),3e3),u===i.GMBScriptOnPage)E(window.location.href,u,i,t);else if(u===i.GMBScriptWithDirectLocation)E(I(),u,i,t);else{if(u!==i.GMBScriptWithNearLocation)throw new Error("value not found");E(B(),u,i,t)}}catch(e){return document.getElementById("errorMessageButtonClick").innerText="An error occured. Sorry for the inconvenience.",void w({auditType:t,error:e})}}},R=function(){return window.location.hostname},I=function(){var e=R(),t=encodeURI("".concat(r," ").concat(U()));return"https://".concat(e,"/maps/search/").concat(t)},B=function(){var e=R(),t=encodeURI("".concat(r,"&near=").concat(U()));return"https://".concat(e,"/maps?q=").concat(t)},z=function(e,t){var n=Math.floor(Math.random()*t*1e3);setTimeout((function(){e()}),n)},H=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){var e=n.status;if(!(0===e||e>=200&&e<400))return"";try{var r=n.response.indexOf("window.APP_INITIALIZATION_STATE="),i=n.response.indexOf("window.APP_FLAGS",r),a=n.response.substring(r+32,i),o=JSON.parse(a.slice(0,-1));t(o)}catch(e){t("")}}},n.open("GET",e),n.send()},_=function(){H(I(),(function(e){try{var t=e&&e[3]?e[3][2]:"";if(t&&t.length>5){var n=JSON.parse(t.substring(5)),r=P(n),a=r.categories,o=(r.phoneNumber,r.businessName),c=r.averageNumberOfReviews,d=r.averageReviewRating;a&&a.length&&M().trim()===o.trim()&&c===A()["number-of-reviews"]&&parseInt(100*d)===parseInt(100*A()["average-review-rating"])?(u=i.GMBScriptWithDirectLocation,Q(a)):z(Y,1)}else z(Y,1)}catch(e){z(Y,1)}}))},Y=function(){H(B(),(function(e){try{var t=e&&e[3]?e[3][2]:"";if(t&&t.length>5){var n=JSON.parse(t.substring(5)),r=P(n),a=r.categories,o=(r.phoneNumber,r.businessName),c=r.averageNumberOfReviews,d=r.averageReviewRating;a&&a.length&&M().trim()===o.trim()&&c===A()["number-of-reviews"]&&parseInt(100*d)===parseInt(100*A()["average-review-rating"])?(u=i.GMBScriptWithNearLocation,Q(a)):F(v)}else F(v)}catch(e){F(v)}}))},F=function(e){try{D(),e===N?W(O()):j(O(),e)}catch(e){D(),C()}},W=function(e){var t=document.createElement("img");t.setAttribute("class",c),t.src=chrome.runtime.getURL("imgs/loading.gif"),t.style.cssText="height: 35px; margin-left: 0; margin-top: -8px; display: block; margin-top: 7px;",e.appendChild(t)},j=function(e,t){var n=document.createElement("p");n.setAttribute("class",c),n.style.cssText="display: inline-block; font-size: 14px; border-radius: .25rem; color: #212529;",n.appendChild(document.createTextNode(t)),e.appendChild(n)},Q=function(e){try{D();var t=document.createElement("div");t.className=c,t.style.cssText="position: relative; margin-top: 7px;",s(t);var n=document.createElement("span");n.textContent="GMB Categories: ",n.style.cssText="display: inline-block; font-size: 14px; border-radius: .25rem; color: #212529;",t.appendChild(n),e.forEach((function(e,n){var r=document.createElement("span");r.innerHTML=(0===n?g({iconName:"star_icon.svg",iconSize:"12px"}):"")+e,r.style.cssText="display: inline-block;padding: .25em .4em;font-size: 14px;line-height: 1;text-align: center;white-space: nowrap;vertical-align: baseline;border-radius: .25rem;color: #212529;background-color: #ffc8b9;margin: 0 0 3px 3px;",t.appendChild(r)})),b(t,e),function(e){var t=document.createElement("div");t.id="popupButtonAdditionalInformationDiv",t.style.cssText="text-align: left;\n      display: flex;\n      flex-wrap: wrap;\n      margin-top: 10px;";var n=h("".concat(g({iconName:"rocket_icon.svg",iconSize:"14px"})," Basic Audit"),"popupButtonAdditionalInformation",{style:"flex-basis: 48%;\n          margin-bottom: 0 !important;\n          margin-top: 10px !important;"});L(n,"basic-audit"),t.appendChild(n);var r=h("".concat(g({iconName:"brain_icon.svg",iconSize:"15px"})," \n          AI"),"popupAIAudit",{style:"flex-basis: 48%;\n            margin-bottom: 0;\n            margin-top: 10px;"});r.style.width="100px",L(r,"ai-audit"),t.appendChild(r);var i=h("".concat(g({iconName:"pin_icon.svg",iconSize:"14px"})," Teleport"),"popupTeleport",{style:"flex-basis: 48%;\n          margin-bottom: 0;\n          margin-top: 10px;"});L(i,"teleport"),t.appendChild(i);var a=h("".concat(g({iconName:"half_star_icon.svg",iconSize:"14px"})," Review Audit"),"popupReviewAudit",{style:"flex-basis: 48%;\n          margin-bottom: 0;\n          margin-top: 10px;"});a.style.width="120px",L(a,"review-audit"),t.appendChild(a);var o=h("".concat(g({iconName:"megaphone_icon.svg",iconSize:"14px"})," Post Audit"),"popupPostAudit",{style:"flex-basis: 48%;\n          margin-bottom: 0;\n          margin-top: 10px;"});o.style.width="100px",L(o,"post-audit"),t.appendChild(o);var c=document.createElement("div");c.id="errorMessageButtonClick",t.appendChild(c),e.appendChild(t)}(t),O().appendChild(t)}catch(e){D(),C()}},X=function(e){var t=e.querySelector("."+q);t&&t.remove()},K=function(e,t){for(var n=0;n<t.length;n++)if(t[n].innerText.trim()===e){X(t[n].parentNode.parentNode);var r=document.createElement("div");r.className=q,r.style.cssText="margin-top: 7px;";var i=document.createElement("span");i.textContent="GMB category not found",i.style.cssText="display: inline-block; font-size: 12px; border-radius: .15rem; color: #212529;",r.appendChild(i),t[n].parentNode.parentNode.append(r)}},V=function(e,t,n){for(var r=function(){if(n[o].innerText.trim()===e){var r=n[o].parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;X(r);var c=document.createElement("div");c.className=q,c.style.cssText="position: relative; margin-top: 7px; padding-left: 24px; padding-right: 6px;";var d=document.createElement("span");d.textContent="GMB Cat.: ",d.style.cssText="display: inline-block; font-size: 12px; border-radius: .15rem; color: #212529;",c.appendChild(d),t.forEach((function(e,t){var n=document.createElement("span");n.innerHTML=(0===t?g({iconName:"star_icon.svg",iconSize:"10px"}):"")+e,n.style.cssText="display: inline-block;padding: .25em .25em;font-size: 12px;line-height: 1;text-align: center;white-space: nowrap;vertical-align: baseline;border-radius: .15rem;color: #212529;background-color: #ffc8b9;margin: 0 0 1px 1px;",c.appendChild(n)})),b(c,t,a.mapSearchResultPane),c.appendChild(function(){var e=document.createElement("div");e.style.cssText="text-align: left;";var t=function(e,t){var n=document.createElement("button");return n.style.cssText="margin-top: 3px; margin-bottom: 3px; width: 70px; margin-right: 2px; line-height: 1.5; border: 2px solid rgb(204, 77, 41); background-color: rgb(255, 200, 185); color: rgb(33, 37, 41); font-size: 12px; padding: 3px 2px; display: inline-block; border-radius: 3px; cursor: pointer;",n.innerHTML=e,n.onclick=t,n},n=function(e){return e.parentElement.parentElement.parentElement.parentElement.firstChild.href};return e.appendChild(t("".concat(g({iconName:"rocket_icon.svg",iconSize:"12px"})," Basic"),(function(){E(n(this),i.ExactLink,i,"basic-audit")}))),e.appendChild(t("".concat(g({iconName:"brain_icon.svg",iconSize:"13px"})," \n            AI"),(function(){E(n(this),i.ExactLink,i,"ai-audit")}))),e.appendChild(t("".concat(g({iconName:"pin_icon.svg",iconSize:"12px"})," Teleport"),(function(){E(n(this),i.ExactLink,i,"teleport")}))),e.appendChild(t("".concat(g({iconName:"half_star_icon.svg",iconSize:"12px"})," Review"),(function(){E(n(this),i.ExactLink,i,"review-audit")}))),e.appendChild(t("".concat(g({iconName:"megaphone_icon.svg",iconSize:"12px"})," Post"),(function(){E(n(this),i.ExactLink,i,"post-audit")}))),e}()),r.appendChild(c)}},o=0;o<n.length;o++)r()},$=function(){var e,t=[],n=document.querySelectorAll("div.fontBodyMedium > div > div.fontHeadlineSmall");if(function(e){for(var t,n=0;n<e.length;n++){(t=document.createElement("img")).setAttribute("class",q),t.src=chrome.runtime.getURL("imgs/loading.gif"),t.style.cssText="height: 35px; margin-left: 0; margin-top: -8px; display: block; margin-top: 7px; padding-left:24px; padding-right: 6px;";var r=e[n].parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(null===r.querySelector("."+q))try{r.insertBefore(t,r.nextSibling)}catch(e){}}}(n),t=function(e){for(var t,n="",r=[],i=0;i<e.length;i++){t=e[i];try{n=t.parentNode.parentNode.parentNode.getElementsByClassName("section-subtitle-extension")[0].parentElement.innerText.split(" · ")[1].split("\n")[0]}catch(e){n=""}r.push({"business-title":e[i].innerText.trim(),"business-address":n,"business-page-url":t.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector("a").href,"business-categories":""})}return r}(n),!(n.length>0&&m.length>0&&function(e,t){var n=!1;if(e&&t&&e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]["business-title"]!==t[r]["business-title"]||e[r]["business-address"]!==t[r]["business-address"]){n=!0;break}return!n}(t,m))){m=t,p.length>100&&(p=[]);for(var r=0;r<t.length;r++){e=!1;for(var i=0;i<p.length;i++)if(p[i]["business-title"]===t[r]["business-title"]&&p[i]["business-address"]===t[r]["business-address"]){e=!0,t[r]["business-categories"]=p[i]["business-categories"];break}e?V(t[r]["business-title"],t[r]["business-categories"],n):te(t[r],n)}}},te=function(e,t){H(e["business-page-url"],(function(n){try{var r=n,i=r&&r[3]?r[3][6]:"";if(i&&i.length>5){var a=JSON.parse(i.substring(5))[6][13];a&&a.length?(V(e["business-title"],a,t),e["business-categories"]=a,p.push(e)):K(e["business-title"],t)}else K(e["business-title"],t)}catch(n){K(e["business-title"],t)}}))};!function(){var d,s;s="\n    .gmb-admin-section-tiles:hover {\n      background-color: rgb(255, 184, 165) !important;\n    }\n\n    .".concat(d=c,":hover .").concat(o," {\n        opacity: 1;\n        transition: opacity 0.25s linear;\n        transform: translate(-50%, 0);\n    }\n    \n    .").concat(d," .").concat(o,' {\n        position: absolute;\n        left: 50%;\n        bottom: 100%;\n        opacity: 0;\n        margin-bottom: 0.5rem;\n        padding: 0.25rem 0.5rem;\n        border-radius: 0.25rem;\n        font-weight: 400;\n        line-height: 1.5;\n        text-decoration: none;\n        text-shadow: none;\n        text-transform: none;\n        text-align: center;\n        letter-spacing: normal;\n        word-break: normal;\n        word-spacing: normal;\n        white-space: normal;\n        line-break: auto;\n        word-wrap: break-word;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,\n        "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",\n        "Segoe UI Symbol", "Noto Color Emoji";\n        font-size: 0.875rem;\n        color: #fff;\n        background-color: #191919;\n        max-width: 200px;\n    }\n    \n    .').concat(d," .").concat(o,"::before {\n        content: '';\n        position: absolute;\n        top: 100%;\n        left: 50%;\n        width: 0;\n        height: 0;\n        border: 0.5em solid transparent;\n        border-top-color: #000;\n        transform: translate(-50%, 0);\n    }\n\n    @keyframes ").concat(d,"_loader_spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }"),document.head.appendChild(document.createElement("style")).innerHTML=s;var h,m,v,E,P,A,U,D=new URL(window.location.href),L=function(){var e=document.querySelector("section>div[data-ved]  div[role='heading']");if(e)return null==e?void 0:e.textContent;var t=document.querySelector("form[action='/search'][role='search'] textarea[name='q']");return t?null==t?void 0:t.value:""};if(-1!==window.location.href.toString().indexOf("/maps")||-1!==window.location.href.toString().indexOf("maps.google")){var R=document.URL.includes("gevercode");-1==window.location.href.toString().indexOf("/maps/search/")||R?(m=(h=e)["teleport-dashboard"]["dashboard-url"],v=h["teleport-dashboard"]["google-url"],E=document.URL,P=new URLSearchParams(window.location.search),E.includes("gevercode")&&E.includes(v)&&(f("GMB Everywhere is processing.<br>Stay on this tab to continue processing."),document.onreadystatechange=function(){"complete"===document.readyState&&setTimeout((function(){chrome.storage.local.get("searchRank",(function(e){if(e.searchRank&&e.searchRank.length){if(!(e.searchRank.length>0))return void chrome.runtime.sendMessage({method:"Dashboard"},(function(e){}));chrome.storage.local.remove("searchRank")}try{var t,n,r=[],i={};if(i.gevercode=P.get("gevercode"),i.businessTerm=P.get("businessTerm"),i.businessAddress=P.get("businessAddress"),i.rating=parseFloat(P.get("rating")),i.businessName=P.get("businessName"),i.lat=P.get("lat"),i.lng=P.get("lng"),i.phone=P.get("phone")?P.get("phone").trim():"",i.placeId=P.get("place-id"),document.querySelector("#pane>div>div>div>div>div>div")?n="#pane>div>div>div>div>div>div":document.querySelector("#pane+div>div>div>div>div:nth-child(2)>div>div>div>div>div>div")&&(n="#pane+div>div>div>div>div:nth-child(2)>div>div>div>div>div>div"),n){var a=fe(document.querySelector(n).children).length,o=document.querySelector(n);o.scrollTo(0,o.scrollHeight),function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;setTimeout((function(){var o=document.querySelector(r),c=fe(o.children).length;o.scrollTo(0,o.scrollHeight),c===t&&a++,c>=n||a>3?i():e(c,n,r,i,a)}),1e3)}(a,22,n,(function(){fe(document.querySelector(n).children).forEach((function(e,t){if(!(t>21)){var n={};try{if(n.ads=e.ads,e.querySelector("div>a")){var i,a,o,c,d,s,l,u,p,h,m,f;n.title=null===(i=e.querySelector("div>div:nth-child(4)>div>div>div>div:nth-child(2)>div>:nth-child(3)"))||void 0===i||null===(i=i.innerText)||void 0===i?void 0:i.trim(),n.title||(n.title=null===(u=e.querySelector(".fontHeadlineSmall"))||void 0===u||null===(u=u.innerText)||void 0===u?void 0:u.trim()),n.title||(n.title=null===(p=e.querySelector("div>div:nth-child(4)"))||void 0===p||null===(p=p.innerText)||void 0===p?void 0:p.trim()),n.category=null===(a=e.querySelector("div>div:nth-child(4)>div>div>div>div:nth-child(2)>:nth-child(4)>div>span>span"))||void 0===a||null===(a=a.innerText)||void 0===a?void 0:a.trim(),n.category||(n.category=null===(h=e.querySelector(".fontHeadlineSmall").parentElement.parentElement.parentElement.parentElement.querySelector("div:nth-child(2)>:nth-child(4)>div>span>span"))||void 0===h||null===(h=h.innerText)||void 0===h?void 0:h.trim()),n.location=null===(o=e.querySelector("div>div:nth-child(4)>div>div>div>div:nth-child(2)>:nth-child(4)>div>:nth-child(2)>:nth-child(2)"))||void 0===o||null===(o=o.innerText)||void 0===o?void 0:o.trim(),n.location||(n.location=null===(m=e.querySelector(".fontHeadlineSmall").parentElement.parentElement.parentElement.parentElement.querySelector("div:nth-child(2)>:nth-child(4)>div>:nth-child(2)>:nth-child(2)"))||void 0===m||null===(m=m.innerText)||void 0===m?void 0:m.trim()),n.rating=parseFloat(null===(c=e.querySelector("div>div:nth-child(4)>div>div>div>div:nth-child(2)>:nth-child(3)>div>:nth-child(2)>span>span"))||void 0===c?void 0:c.innerText),n.rating||(n.rating=parseFloat(null===(f=e.querySelector(".fontHeadlineSmall").parentElement.parentElement.parentElement.querySelector("div:nth-child(2)>:nth-child(3)>div>:nth-child(2)>span>span"))||void 0===f?void 0:f.innerText));var v,g=null===(d=e.querySelector("div>div:nth-child(4)>div>div>div>div:nth-child(2)>:nth-child(4)>:nth-child(2):nth-child(2)>:nth-child(2)>span:nth-child(2)"))||void 0===d?void 0:d.innerText;g||(g=null===(v=e.querySelector(".fontHeadlineSmall").parentElement.parentElement.parentElement.querySelector("div:nth-child(2)>:nth-child(4)>:nth-child(2):nth-child(2)>:nth-child(2)>span:nth-child(2)"))||void 0===v?void 0:v.innerText),g&&(n.formattedPhoneNumber=(E=g,new RegExp("^[s()+-]*([0-9][s()+-]*){".concat(5,",20}$")).test(null==E?void 0:E.replace(/\s/g,""))?g.replace(/[^0-9]+/g,"").slice(-5):""));var w,b=null===(s=e.querySelector("div>div:nth-child(4)>div>div>div>div:nth-child(2)>:nth-child(4)"))||void 0===s||null===(s=s.querySelector(":scope div>span:last-of-type > span:nth-child(2)"))||void 0===s?void 0:s.innerText;b||(b=null===(w=e.querySelector(".fontHeadlineSmall").parentElement.parentElement.parentElement.querySelector("div:nth-child(2)>:nth-child(4)>div>span:nth-child(2)>span:nth-child(2)"))||void 0===w?void 0:w.innerText),b&&(b.match(/^\+\d/)?(n.rawPartialAddress="",n.formattedPartialAddress=""):(n.formattedPartialAddress=b.replace(/ |,/gi,"").toLowerCase(),n.rawPartialAddress=b));var x=null===(l=e.querySelector("div>div>a"))||void 0===l?void 0:l.href;if(x){var S=y(x);n.placeId=S}if(!n.placeId){var T=e.querySelectorAll("div a[href]");if((null==T?void 0:T.length)>0){var N,q=Array.from(T).map((function(e){return e.href})),C=null==q||null===(N=q.filter((function(e){return y(e)})))||void 0===N?void 0:N[0];if(C){var k=y(C);n.placeId=k}}}r.push(n)}}catch(e){}}var E}));var e=r.map((function(e){var t={name:e.title||"",address:e.rawPartialAddress||"",shortAddr:e.formattedPartialAddress||"",shortPhone:e.formattedPhoneNumber||"",rat:e.rating||"",pid:e.placeId||""};return e.ads&&(t.ads=1),t})),t=function(e,t,n,r){try{var i=ve(e,t,n,r);return i.length<8100?r:(i=ve(e,t,n,r.slice(0,12))).length<8100?r.slice(0,12):r.slice(0,6)}catch(e){return r}}(m,P,i,e);P.append("businesses",JSON.stringify(t)),P.append("searchedOnce",!0),P.append("teleport-business",JSON.stringify(i)),window.location.replace("".concat(m,"?").concat(P.toString()))}))}else(null===(t=document.querySelector("#pane>div>div>div>div>div:nth-child(2)>div>div>div>h1"))||void 0===t?void 0:t.innerText)===P.get("businessName")&&(P.append("result",1),P.append("searchedOnce",!0),window.location.replace("".concat(m,"?").concat(P.toString())))}catch(e){return void w({auditType:"teleport",error:e,newTab:!1})}}))}),1e3)})):p=p.concat(function(){var e=document.documentElement.innerHTML,t=[],n=e.indexOf("window.APP_INITIALIZATION_STATE="),r=e.indexOf("window.APP_FLAGS",n),i=e.substring(n+32,r),a=JSON.parse(i.slice(0,-1))[3][2];if(a&&a.length>5)for(var o=JSON.parse(a.substring(5)),c=1;c<o[0][1].length;c++)try{t.push({"business-title":o[0][1][c][14][11],"business-address":o[0][1][c][14][2][0],"business-categories":o[0][1][c][14][13]})}catch(e){C()}return t}()),setInterval((function(){if(-1!=window.location.href.toString().indexOf("/maps/place/")){if((!r&&M()||r&&r!==M())&&(r=M(),F(N),function(){var e;try{e=O()}catch(e){}e&&function(){try{var e=l();if(e&&e.length>5){var t=JSON.parse(e.substring(5)),n=t[6][13],r=t[6][11];n&&n.length&&M().trim()===r.trim()?(u=i.GMBScriptOnPage,Q(n)):z(_,1)}else z(_,1)}catch(e){z(_,1)}}()}()),document.querySelectorAll("div.fontBodyMedium > div > div.fontHeadlineSmall").length>0)try{$(),G()}catch(e){k=!0,document.querySelectorAll("."+q).forEach((function(e){return e.remove()})),C()}}else if(k&&-1!=window.location.href.toString().indexOf("/maps/search/")&&!R)try{$(),G()}catch(e){k=!1,document.querySelectorAll("."+q).forEach((function(e){return e.remove()})),C()}}),1e3)}else if(Z())le(),(U=null===(A=document.querySelector("#appbar"))||void 0===A||null===(A=A.querySelector('a[href^="/search"]'))||void 0===A?void 0:A.parentElement)&&U.appendChild(pe()),setInterval((function(){(Z()&&!J&&ee()||J&&J!==ee())&&ce()}),1e3);else if(D.searchParams.has("q")&&0===D.pathname.indexOf("/search")&&!D.searchParams.get("ge-mode")){var I;setTimeout((function(){try{var t=!1,n=!1,r=!1,i=!1;setInterval((function(){try{if(-1!==window.location.href.indexOf("mpd=editprofile/info")||-1!==window.location.href.indexOf("mpd=")&&-1!==window.location.href.indexOf("/editprofile/info")){var o=document.querySelector("iframe[sandbox][src]");if(o){var c,d=(null==o?void 0:o.contentDocument)||(null==o||null===(c=o.contentWindow)||void 0===c?void 0:c.document),s=L();if(d){var l,u,p,h=d.querySelector("[data-verified-origin]  main > div > div > div > div > div > div > section:nth-of-type(2) > div > div > div"),m=[],f=null==h?void 0:h.querySelector(".btn-gmb-category-tool");if(h&&!f&&(h.style.setProperty("display","flex","important"),h.style.setProperty("flex-direction","row","important"),h.style.setProperty("justify-content","flex-start","important"),h.nextElementSibling&&h.nextElementSibling.querySelectorAll("ul>li").length>0)){h.nextElementSibling.querySelectorAll("ul>li").forEach((function(e){var t=e.querySelector("span");if(t){var n=t.textContent;m.push(n)}}));var v=document.createElement("div");b(v,m,a.gmbEditProfileAdmin),h.appendChild(v)}var y=null===(l=d.querySelector("[data-verified-origin]  main > div > div > div > div > div > div > section:nth-of-type(2) > div"))||void 0===l||null===(l=l.nextElementSibling)||void 0===l?void 0:l.querySelector("div > div > div"),w=null==y?void 0:y.querySelector(".btn-gmb-category-tool");if(y&&!w){y.style.setProperty("display","flex","important"),y.style.setProperty("flex-direction","row","important"),y.style.setProperty("justify-content","flex-start","important");var T=document.createElement("div");T.style.marginLeft="10px",b(T,m,a.gmbEditProfileAdmin),y.appendChild(T)}var N=null===(u=d.querySelector("[data-verified-origin]  main > div > div > div > div > div > div > section:nth-of-type(2) > div"))||void 0===u||null===(u=u.nextElementSibling)||void 0===u||null===(u=u.querySelector("div > div > div"))||void 0===u||null===(u=u.nextElementSibling)||void 0===u||null===(u=u.querySelector("section > div"))||void 0===u||null===(u=u.nextElementSibling)||void 0===u?void 0:u.querySelector("div"),q=null==N||null===(p=N.querySelector("div > div:nth-of-type(2)"))||void 0===p?void 0:p.nextElementSibling,C=null==N?void 0:N.querySelector(".btn-gmb-category-tool");if(q&&!C){var k,E=[],P=null==N||null===(k=N.querySelector("div > div:nth-of-type(2)"))||void 0===k?void 0:k.querySelectorAll("label > input");null==P||P.forEach((function(e){var t=null==e?void 0:e.value;t&&E.push(t)}));var A=document.createElement("div");b(A,E,a.gmbEditProfileAdmin),q.style.display="inline-block",A.style.display="inline-block",q.parentNode.insertBefore(A,q.nextSibling)}var M=d.querySelector("[data-verified-origin]  main > div > div > div > div > div > div > section:nth-of-type(3) > div > div > div"),O=null==M?void 0:M.querySelector(".btn-gmb-generate-desc");if(M&&!O){M.style.setProperty("display","flex","important"),M.style.setProperty("flex-direction","row","important"),M.style.setProperty("justify-content","flex-start","important");var U=document.createElement("div");!function(t,n){t.classList.add("btn-gmb-generate-desc");var r=document.createElement("button");r.style.cssText="\n    height: 21px; \n    cursor: pointer; \n    display: inline-block; \n    padding: 0.26em 0.4em 0.25em 0.3em; \n    font-size: 14px;\n    line-height: 1; \n    text-align: center; \n    white-space: nowrap; \n    vertical-align: middle; \n    border: none;\n    border-radius: .25rem; \n    color: #fff; \n    background-color: rgb(204, 77, 41); \n    margin: 0 0 3px 3px;\n    ",r.onclick=function(t){t.stopPropagation();var r=new URL(e["admin-section"]["ai-description"],e["admin-section"]["base-url"]);r.searchParams.set("post-ai-mode","generate-user-from-gmb-admin-page"),n&&r.searchParams.set("additional-information","Business Name: ".concat(n)),window.open(r.toString(),"_blank")},r.innerHTML="".concat(g({iconName:"brain_icon.svg",iconSize:"16px",top:"-1px"}));var i=document.createElement("span");i.innerText="Generate Description",i.style.cssText="\n    position: relative;\n    bottom: 4px !important;\n    ",r.insertBefore(i,r.nextSibling),t.appendChild(r)}(U,s),M.appendChild(U)}}}}}catch(e){}try{if(["mpd=promote/updates/menu","mpd=promote/updates/add","mpd=promote/offers/add","mpd=promote/events/add"].some((function(e){return-1!==window.location.href.indexOf(e)}))){var D=document.querySelector("iframe[sandbox][src]"),R=L();if(D){var I,B=(null==D?void 0:D.contentDocument)||(null==D||null===(I=D.contentWindow)||void 0===I?void 0:I.document);if(B){var z=B.querySelector("header > h1"),H=null==z?void 0:z.querySelector(".btn-gmb-generate-post");if(z&&!H){z.style.setProperty("display","flex","important"),z.style.setProperty("flex-direction","row","important"),z.style.setProperty("justify-content","flex-start","important");var _=document.createElement("div");!function(t,n){t.classList.add("btn-gmb-generate-post");var r=document.createElement("button");r.style.cssText="\n    height: 21px; \n    cursor: pointer; \n    display: inline-block; \n    padding: 0.26em 0.4em 0.25em 0.3em; \n    font-size: 14px;\n    line-height: 1; \n    text-align: center; \n    white-space: nowrap; \n    vertical-align: middle; \n    border: none;\n    border-radius: .25rem; \n    color: #fff; \n    background-color: rgb(204, 77, 41); \n    margin: 0 0 3px 10px;\n    ",r.onclick=function(t){t.stopPropagation();var r=new URL(e["admin-section"]["ai-post"],e["admin-section"]["base-url"]);r.searchParams.set("post-ai-mode","generate-user-from-gmb-admin-page"),n&&r.searchParams.set("additional-information","Business Name: ".concat(n)),window.open(r.toString(),"_blank")},r.innerHTML="".concat(g({iconName:"brain_icon.svg",iconSize:"16px",top:"-1px"}));var i=document.createElement("span");i.innerText="Generate Post",i.style.cssText="\n    position: relative;\n    bottom: 4px !important;\n    ",r.insertBefore(i,r.nextSibling),t.appendChild(r)}(_,R),z.appendChild(_)}}}}}catch(e){}try{if(-1!==window.location.href.indexOf("lpqa=")){var Y=document.querySelector("span[jsslot]>div>div[id][data-async-context][data-jiis][data-async-context-required] > div>div>div>div>div>div");if(Y&&!t){Y.style.setProperty("display","flex","important"),Y.style.setProperty("flex-direction","row","important"),Y.style.setProperty("justify-content","flex-start","important");var F=document.createElement("div"),G=L();x(F,G),Y.appendChild(F),Y.childNodes[0].nodeValue=(W=G).length>25?"".concat(W.substring(0,25),"..."):W,t=!0}}else t=!1}catch(e){}var W;try{if(-1!==window.location.href.indexOf("mpd=")&&-1!==window.location.href.indexOf("/customers/questions/unpublished")){var j=document.querySelector("iframe[sandbox][src]");if(j&&!n){var J,Q=(null==j?void 0:j.contentDocument)||(null==j||null===(J=j.contentWindow)||void 0===J?void 0:J.document);if(Q){var X=Q.querySelector("header > h1");if(X){X.style.setProperty("display","flex","important"),X.style.setProperty("flex-direction","row","important"),X.style.setProperty("justify-content","flex-start","important");var K=document.createElement("div"),V=L();x(K,V),X.appendChild(K),n=!0}}}}else n=!1}catch(e){}try{if(-1!==window.location.href.indexOf("mat=")){var Z=document.querySelector("section[data-nagarde][data-nagide][data-ved] > div > div > ul");if(Z&&!r){var $=Z.querySelectorAll("li")[0].querySelector("button");if($){var ee=document.createElement("li");ee.className=Z.querySelector("li").className,ee.style.cssText="\n                          background-color: rgb(255, 200, 185);\n                          border: 2px solid rgb(204, 77, 41);\n                          border-radius: 3px;\n                        ",function(t,n,r){var i=document.createElement("button");i.className=t.className,i.style.cssText="\n    display: flex;\n    flex-direction: column;\n    align-content: center;\n    align-items: center;\n    color: #000 !important;\n  ",i.classList.add("gmb-admin-section-tiles"),i.onclick=function(t){t.stopPropagation();var n=new URL(e["admin-section"]["ai-tools"],e["admin-section"]["base-url"]);n.searchParams.set("post-ai-mode","generate-user-from-gmb-admin-page"),r&&n.searchParams.set("additional-information","Business Name: ".concat(r)),window.open(n.toString(),"_blank")};var a=document.createElement("span");a.textContent="AI Tools",a.style.cssText="\n    display: block;\n    font-family: Google Sans, arial, sans-serif;\n    font-weight: 400;\n    white-space: nowrap;\n    font-size: 14px;\n    margin-top: 5px;\n  ";var o=document.createElement("span");o.textContent="GMBEVERYWHERE",o.style.cssText="\n    display: block;\n    font-family: Google Sans, arial, sans-serif;\n    font-weight: 400;\n    white-space: nowrap;\n    font-size: 9px;\n  ",i.innerHTML=g({iconName:"brain_icon.svg",iconSize:"20px"}),i.appendChild(a),i.appendChild(o),n.appendChild(i)}($,ee,L()),Z.appendChild(ee),r=!0}}}else r=!1}catch(e){}try{if(-1!==window.location.href.indexOf("&mat=")&&(-1!==window.location.href.indexOf("lrd=")||-1!==window.location.href.indexOf("mpd=")&&-1!==window.location.href.indexOf("/customers/reviews"))){if(document.querySelector("div[data-google-review-count][data-next-page-token]")&&!i){var te,ne=null===(te=document.querySelector("div[data-google-review-count][data-next-page-token]"))||void 0===te?void 0:te.childNodes;(null==ne?void 0:ne.length)>0&&ne.forEach((function(e){var t=e.querySelector(":scope > div:nth-child(3)");if(t){var n,r=null===(n=e.querySelector("span[data-expandable-section]"))||void 0===n?void 0:n.textContent,a=document.createElement("div");S(a,r);var o=t.querySelectorAll("button");o.length>1?t.querySelector("div").insertBefore(a,o[1]):t.appendChild(a),i=!0}}))}var re=document.querySelector("iframe[sandbox][src]");if(re){var ie,ae=(null==re?void 0:re.contentDocument)||(null==re||null===(ie=re.contentWindow)||void 0===ie?void 0:ie.document);if(ae){var oe,ce=ae.querySelectorAll("c-wiz[c-wiz] > div > article");(null==ce?void 0:ce.length)>0&&ce.forEach((function(e){var t=e.nextSibling.querySelector("button").parentElement,n=t.querySelector(".btn-gmb-generate-reply");if(t&&!n){var r,a=null===(r=e.querySelector("span[id] > span"))||void 0===r||null===(r=r.nextSibling)||void 0===r?void 0:r.textContent,o=document.createElement("div"),c=t.querySelectorAll("button");if(c.length>1){var d=c[0].querySelector("svg")?1:2;S(o,a,d),t.insertBefore(o,c[1])}else S(o,a),t.appendChild(o);i=!0}}));var de=ae.querySelector("c-wiz > div > div > article"),se=null===(oe=ae.querySelector("c-wiz > div > div > article"))||void 0===oe?void 0:oe.parentElement,le=null==se?void 0:se.querySelector(".btn-gmb-generate-reply");if(de&&!le){var ue,pe=null===(ue=de.querySelector("span[id] > span"))||void 0===ue||null===(ue=ue.nextElementSibling)||void 0===ue?void 0:ue.innerText,he=se.querySelector("section > div").nextElementSibling,me=he.querySelectorAll("button"),fe=document.createElement("div");S(fe,pe,3),he.insertBefore(fe,me[1])}var ve=ae.querySelector("header > h1"),ge=null==ve?void 0:ve.querySelector(".btn-gmb-generate-reply");if(ve&&!ge){ve.style.setProperty("display","flex","important"),ve.style.setProperty("flex-direction","row","important"),ve.style.setProperty("justify-content","flex-start","important");var ye=document.createElement("div");S(ye,"",4),ve.appendChild(ye)}}}}else i=!1}catch(e){}try{if(-1!==window.location.href.indexOf("mpd=")&&-1!==window.location.href.indexOf("/editprofile/services")){var we=document.querySelector("iframe[sandbox][src]");if(we){var be,xe=(null==we?void 0:we.contentDocument)||(null==we||null===(be=we.contentWindow)||void 0===be?void 0:be.document);if(xe){var Se=xe.querySelector("header > h1"),Te=null==Se?void 0:Se.querySelector(".btn-gmb-category-tool");if(Se&&!Te){Se.style.setProperty("display","flex","important"),Se.style.setProperty("flex-direction","row","important"),Se.style.setProperty("justify-content","flex-start","important");var Ne=xe.querySelectorAll("main section");if(Ne){var qe=[];Ne.forEach((function(e){var t,n=null===(t=e.querySelector("span[id][role]"))||void 0===t?void 0:t.textContent;n&&qe.push(n)}));var Ce=document.createElement("div");b(Ce,qe,a.gmbEditServicesAdmin),Se.appendChild(Ce)}}}}}}catch(e){}}),3e3)}catch(e){}try{(I=function(){for(var e=null,t=document.getElementsByTagName("g-img"),n=0;n<t.length;n++){var r=!1;try{r=t[n]&&t[n].parentNode&&t[n].parentNode.parentNode&&t[n].parentNode.parentNode.parentNode&&t[n].parentNode.parentNode.parentNode.parentNode&&t[n].parentNode.parentNode.parentNode.parentNode.nextSibling&&t[n].parentNode.parentNode.parentNode.parentNode.nextSibling.nextSibling&&t[n].parentNode.parentNode.parentNode.parentNode.nextSibling.nextSibling.nextSibling&&t[n].parentNode.parentNode.parentNode.parentNode.nextSibling.nextSibling.nextSibling.querySelectorAll("a")[0]&&t[n].parentNode.parentNode.parentNode.parentNode.nextSibling.nextSibling.nextSibling.querySelectorAll("a")[0].hasAttribute("data-cid")}catch(e){}if(r){e=t[n];break}}return e}())?function(e){for(var t=e.parentNode.parentNode.parentNode.parentNode.nextSibling.nextSibling.nextSibling.querySelectorAll("a[data-cid]"),n=0;n<t.length;n++){var r=se(t[n].getAttribute("data-cid"));t[n].firstChild.appendChild(r)}}(I):(I=function(){var e=null;try{var t,n,r=document.querySelectorAll("a[data-cid]");r.length>0&&(Array.from(r).some((function(e){return null!==e.parentNode.querySelector("a:last-child>div>div>img")}))||(null===(t=Array.from(r).shift().parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextSibling.querySelector("div>a"))||void 0===t||null===(t=t.href)||void 0===t?void 0:t.includes("/search"))||(null===(n=Array.from(r).shift().parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextSibling.querySelector("div>a"))||void 0===n||null===(n=n.href)||void 0===n?void 0:n.includes("/localservices")))&&(e=r)}catch(e){}return e}())||(I=function(){var e=null;try{var t,n,r=document.querySelectorAll("a[data-cid]");r.length>0&&(Array.from(r).some((function(e){return null!==e.parentNode.querySelector("a:last-child>div>div>img")}))||(null===(t=Array.from(r).shift().parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextSibling.querySelector("div>a"))||void 0===t||null===(t=t.href)||void 0===t?void 0:t.includes("/search"))||(null===(n=Array.from(r).shift().parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextSibling.querySelector("div>a"))||void 0===n||null===(n=n.href)||void 0===n?void 0:n.includes("/localservices")))&&(e=r)}catch(e){}return e}())?de(I):(I=function(){var e=null;try{var t,n,r=document.querySelectorAll("a[data-cid]");r.length>0&&(Array.from(r).some((function(e){var t;return null===(t=e.parentNode.querySelector("a:last-child"))||void 0===t||null===(t=t.dataset.url)||void 0===t?void 0:t.includes("/maps/dir")}))||(null===(t=Array.from(r).shift().parentNode.parentNode.parentNode.parentNode.nextSibling.querySelector("div>a"))||void 0===t||null===(t=t.href)||void 0===t?void 0:t.includes("/search"))||(null===(n=Array.from(r).shift().parentNode.parentNode.parentNode.parentNode.nextSibling.querySelector("div>a"))||void 0===n||null===(n=n.href)||void 0===n?void 0:n.includes("/localservices")))&&(e=r)}catch(e){}return e}())?(o=I,Array.from(o).forEach((function(e){var t=se(e.getAttribute("data-cid"));t.querySelectorAll("button").forEach((function(e){e.style.fontSize="13px",e.style.width="99px"})),e.firstChild.appendChild(t)}))):(I=function(){var e=null;try{var t,n,r=document.querySelectorAll("a[data-cid]");r.length>0&&(Array.from(r).some((function(e){return null!==e.parentNode.querySelector("a:last-child>div>div>g-img")}))||(null===(t=Array.from(r).shift().parentNode.parentNode.parentNode.parentNode.parentNode.nextSibling.querySelector("div>a"))||void 0===t||null===(t=t.href)||void 0===t?void 0:t.includes("/search"))||(null===(n=Array.from(r).shift().parentNode.parentNode.parentNode.parentNode.parentNode.nextSibling.querySelector("div>a"))||void 0===n||null===(n=n.href)||void 0===n?void 0:n.includes("/localservices")))&&(e=r)}catch(e){}return e}())?de(I):(I=function(){var e=null;try{var t,n,r=document.querySelectorAll("a[data-cid]");r.length>0&&(Array.from(r).some((function(e){return null!==e.parentNode.querySelector("a:last-child>g-img")}))||(null===(t=Array.from(r).shift().parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextSibling.querySelector("g-more-link>a"))||void 0===t||null===(t=t.href)||void 0===t?void 0:t.includes("/search"))||(null===(n=Array.from(r).shift().parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.nextSibling.querySelector("g-more-link>a"))||void 0===n||null===(n=n.href)||void 0===n?void 0:n.includes("/localservices")))&&(e=function(e){return Array.from(e).filter((function(e){return null===e.querySelector("g-img > img")}))}(r))}catch(e){}return e}())&&(de(I),function(e){var t,n=null===(t=document.querySelector("div[data-hveid] > div[id] div[data-vstcp='1']"))||void 0===t?void 0:t.previousElementSibling;n&&n.insertBefore(zn(e),n.firstChild.nextSibling)}(I))}catch(e){}var o}),1e3)}else if(0===D.pathname.indexOf("/search")&&D.searchParams.get("ge-mode")===t)try{if(D.searchParams.get("unique-code")&&D.searchParams.get("number-of-reviews")){f("GMB Everywhere is processing.<br>Stay on this tab to continue processing.");var B=setInterval((function(){document.getElementsByClassName("review-dialog-body").length>0&&(clearInterval(B),function(){Sn=T();var t=new URL(window.location.href).searchParams.get("number-of-reviews"),n=t?parseInt(t.replace(/[^0-9]/g,"")):0,r=e["audit-dashboard"]["maximum-number-of-reviews-needed-scraping"];setTimeout((function(){1===Sn?document.querySelector('[data-sort-id="newestFirst"]').click():document.querySelector('g-scrolling-carousel[jsshadow] div[data-sort="2"]').click(),Bn(n,r,0,0)}),2e3)}())}),500)}else f("An error occured. Please try again.",!0)}catch(e){f("An error occured. Please try again.",!0)}else if(0===D.pathname.indexOf("/search")&&D.searchParams.get("ge-mode")===n)try{bt()}catch(e){f("An error occured. Please try again.",!0)}}()}catch(e){k=!1,document.querySelectorAll("."+q).forEach((function(e){return e.remove()})),C()}}()})();